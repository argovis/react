import React from 'react';
import { MapContainer, TileLayer, Popup, Polygon, FeatureGroup, Rectangle} from 'react-leaflet'
import { EditControl } from "react-leaflet-draw";
import '../index.css';
import chroma from "chroma-js";
import helpers from'./helpers'
import Tooltip from 'react-bootstrap/Tooltip';
import OverlayTrigger from 'react-bootstrap/OverlayTrigger';

class Timeseries extends React.Component {
    constructor(props) {
      super(props);

      this.defaultPolygon = [[-58.97755101407165,-42.186685470137],[-51.59056763732494,-41.99755920540033],[-51.50565978241981,-47.137023193932286],[-59.317182433692196,-47.59733587844376],[-58.97755101407165,-42.186685470137]]
      let q = new URLSearchParams(window.location.search) // parse out query string
      document.title = 'Argovis - Explore ' + q.get('lattice') + ' grid'
      this.state = {
		gridcells: [],
      	points: [],
      	subpoints: [],
      	polygon: q.has('polygon') ? JSON.parse(q.get('polygon')) : this.defaultPolygon,
      	interpolated_polygon: q.has('polygon') ? helpers.insertPointsInPolygon(JSON.parse(q.get('polygon'))) : helpers.insertPointsInPolygon(this.defaultPolygon),
      	min: 0,
      	max: 1,
		display_min: 0,
		display_max: 1,
		user_defined_min: false,
		user_defined_max: false,
      	levelindex: q.has('levelindex') ? q.get('levelindex') : 0,
      	sublevelindex: q.has('sublevelindex') ? q.get('sublevelindex') : 0,
      	grid	: q.get('grid'),
      	lattice: q.get('lattice'),
      	refreshData: true,
		remapData: false,
      	apiKey: localStorage.getItem('apiKey') ? localStorage.getItem('apiKey') : 'guest',
      	subgrid: q.has('subgrid') ? q.get('subgrid') === 'true' : false,
      	scale: chroma.scale(['#440154', '#482777', '#3f4a8a', '#31678e', '#26838f', '#1f9d8a', '#6cce5a', '#b6de2b', '#fee825']),
      	centerlon: -60,
        data: [[]], // raw download data
        phase: 'refreshData', // refreshData, remapData, awaitingUserInput, or idle
        suppressBlur: false,
      }

	  this.state.timestep = q.has('timestep') ? q.get('timestep') : {
		'noaasst': "1989-12-31",
        'copernicussla': "1993-01-10",
        'ccmpwind': "1993-01-10",
	  }[this.state.lattice]
      this.state.units = this.chooseUnits(this.state.lattice, this.state.grid)
      this.state.levelunits = {
        'noaasst': 'surface',
        'copernicussla': 'surface',
		'ccmpwind': 'surface'
      }[this.state.lattice]
      this.rawLevels = {
        'noaasst': [0],
        'copernicussla': [0],
        'ccmpwind': [0]
      }[this.state.lattice]
      this.levels = this.constructLevelOptions(this.rawLevels)
      this.timesteps = {
        'noaasst': this.constructDateOptions(["1989-12-31","1990-01-07","1990-01-14","1990-01-21","1990-01-28","1990-02-04","1990-02-11","1990-02-18","1990-02-25","1990-03-04","1990-03-11","1990-03-18","1990-03-25","1990-04-01","1990-04-08","1990-04-15","1990-04-22","1990-04-29","1990-05-06","1990-05-13","1990-05-20","1990-05-27","1990-06-03","1990-06-10","1990-06-17","1990-06-24","1990-07-01","1990-07-08","1990-07-15","1990-07-22","1990-07-29","1990-08-05","1990-08-12","1990-08-19","1990-08-26","1990-09-02","1990-09-09","1990-09-16","1990-09-23","1990-09-30","1990-10-07","1990-10-14","1990-10-21","1990-10-28","1990-11-04","1990-11-11","1990-11-18","1990-11-25","1990-12-02","1990-12-09","1990-12-16","1990-12-23","1990-12-30","1991-01-06","1991-01-13","1991-01-20","1991-01-27","1991-02-03","1991-02-10","1991-02-17","1991-02-24","1991-03-03","1991-03-10","1991-03-17","1991-03-24","1991-03-31","1991-04-07","1991-04-14","1991-04-21","1991-04-28","1991-05-05","1991-05-12","1991-05-19","1991-05-26","1991-06-02","1991-06-09","1991-06-16","1991-06-23","1991-06-30","1991-07-07","1991-07-14","1991-07-21","1991-07-28","1991-08-04","1991-08-11","1991-08-18","1991-08-25","1991-09-01","1991-09-08","1991-09-15","1991-09-22","1991-09-29","1991-10-06","1991-10-13","1991-10-20","1991-10-27","1991-11-03","1991-11-10","1991-11-17","1991-11-24","1991-12-01","1991-12-08","1991-12-15","1991-12-22","1991-12-29","1992-01-05","1992-01-12","1992-01-19","1992-01-26","1992-02-02","1992-02-09","1992-02-16","1992-02-23","1992-03-01","1992-03-08","1992-03-15","1992-03-22","1992-03-29","1992-04-05","1992-04-12","1992-04-19","1992-04-26","1992-05-03","1992-05-10","1992-05-17","1992-05-24","1992-05-31","1992-06-07","1992-06-14","1992-06-21","1992-06-28","1992-07-05","1992-07-12","1992-07-19","1992-07-26","1992-08-02","1992-08-09","1992-08-16","1992-08-23","1992-08-30","1992-09-06","1992-09-13","1992-09-20","1992-09-27","1992-10-04","1992-10-11","1992-10-18","1992-10-25","1992-11-01","1992-11-08","1992-11-15","1992-11-22","1992-11-29","1992-12-06","1992-12-13","1992-12-20","1992-12-27","1993-01-03","1993-01-10","1993-01-17","1993-01-24","1993-01-31","1993-02-07","1993-02-14","1993-02-21","1993-02-28","1993-03-07","1993-03-14","1993-03-21","1993-03-28","1993-04-04","1993-04-11","1993-04-18","1993-04-25","1993-05-02","1993-05-09","1993-05-16","1993-05-23","1993-05-30","1993-06-06","1993-06-13","1993-06-20","1993-06-27","1993-07-04","1993-07-11","1993-07-18","1993-07-25","1993-08-01","1993-08-08","1993-08-15","1993-08-22","1993-08-29","1993-09-05","1993-09-12","1993-09-19","1993-09-26","1993-10-03","1993-10-10","1993-10-17","1993-10-24","1993-10-31","1993-11-07","1993-11-14","1993-11-21","1993-11-28","1993-12-05","1993-12-12","1993-12-19","1993-12-26","1994-01-02","1994-01-09","1994-01-16","1994-01-23","1994-01-30","1994-02-06","1994-02-13","1994-02-20","1994-02-27","1994-03-06","1994-03-13","1994-03-20","1994-03-27","1994-04-03","1994-04-10","1994-04-17","1994-04-24","1994-05-01","1994-05-08","1994-05-15","1994-05-22","1994-05-29","1994-06-05","1994-06-12","1994-06-19","1994-06-26","1994-07-03","1994-07-10","1994-07-17","1994-07-24","1994-07-31","1994-08-07","1994-08-14","1994-08-21","1994-08-28","1994-09-04","1994-09-11","1994-09-18","1994-09-25","1994-10-02","1994-10-09","1994-10-16","1994-10-23","1994-10-30","1994-11-06","1994-11-13","1994-11-20","1994-11-27","1994-12-04","1994-12-11","1994-12-18","1994-12-25","1995-01-01","1995-01-08","1995-01-15","1995-01-22","1995-01-29","1995-02-05","1995-02-12","1995-02-19","1995-02-26","1995-03-05","1995-03-12","1995-03-19","1995-03-26","1995-04-02","1995-04-09","1995-04-16","1995-04-23","1995-04-30","1995-05-07","1995-05-14","1995-05-21","1995-05-28","1995-06-04","1995-06-11","1995-06-18","1995-06-25","1995-07-02","1995-07-09","1995-07-16","1995-07-23","1995-07-30","1995-08-06","1995-08-13","1995-08-20","1995-08-27","1995-09-03","1995-09-10","1995-09-17","1995-09-24","1995-10-01","1995-10-08","1995-10-15","1995-10-22","1995-10-29","1995-11-05","1995-11-12","1995-11-19","1995-11-26","1995-12-03","1995-12-10","1995-12-17","1995-12-24","1995-12-31","1996-01-07","1996-01-14","1996-01-21","1996-01-28","1996-02-04","1996-02-11","1996-02-18","1996-02-25","1996-03-03","1996-03-10","1996-03-17","1996-03-24","1996-03-31","1996-04-07","1996-04-14","1996-04-21","1996-04-28","1996-05-05","1996-05-12","1996-05-19","1996-05-26","1996-06-02","1996-06-09","1996-06-16","1996-06-23","1996-06-30","1996-07-07","1996-07-14","1996-07-21","1996-07-28","1996-08-04","1996-08-11","1996-08-18","1996-08-25","1996-09-01","1996-09-08","1996-09-15","1996-09-22","1996-09-29","1996-10-06","1996-10-13","1996-10-20","1996-10-27","1996-11-03","1996-11-10","1996-11-17","1996-11-24","1996-12-01","1996-12-08","1996-12-15","1996-12-22","1996-12-29","1997-01-05","1997-01-12","1997-01-19","1997-01-26","1997-02-02","1997-02-09","1997-02-16","1997-02-23","1997-03-02","1997-03-09","1997-03-16","1997-03-23","1997-03-30","1997-04-06","1997-04-13","1997-04-20","1997-04-27","1997-05-04","1997-05-11","1997-05-18","1997-05-25","1997-06-01","1997-06-08","1997-06-15","1997-06-22","1997-06-29","1997-07-06","1997-07-13","1997-07-20","1997-07-27","1997-08-03","1997-08-10","1997-08-17","1997-08-24","1997-08-31","1997-09-07","1997-09-14","1997-09-21","1997-09-28","1997-10-05","1997-10-12","1997-10-19","1997-10-26","1997-11-02","1997-11-09","1997-11-16","1997-11-23","1997-11-30","1997-12-07","1997-12-14","1997-12-21","1997-12-28","1998-01-04","1998-01-11","1998-01-18","1998-01-25","1998-02-01","1998-02-08","1998-02-15","1998-02-22","1998-03-01","1998-03-08","1998-03-15","1998-03-22","1998-03-29","1998-04-05","1998-04-12","1998-04-19","1998-04-26","1998-05-03","1998-05-10","1998-05-17","1998-05-24","1998-05-31","1998-06-07","1998-06-14","1998-06-21","1998-06-28","1998-07-05","1998-07-12","1998-07-19","1998-07-26","1998-08-02","1998-08-09","1998-08-16","1998-08-23","1998-08-30","1998-09-06","1998-09-13","1998-09-20","1998-09-27","1998-10-04","1998-10-11","1998-10-18","1998-10-25","1998-11-01","1998-11-08","1998-11-15","1998-11-22","1998-11-29","1998-12-06","1998-12-13","1998-12-20","1998-12-27","1999-01-03","1999-01-10","1999-01-17","1999-01-24","1999-01-31","1999-02-07","1999-02-14","1999-02-21","1999-02-28","1999-03-07","1999-03-14","1999-03-21","1999-03-28","1999-04-04","1999-04-11","1999-04-18","1999-04-25","1999-05-02","1999-05-09","1999-05-16","1999-05-23","1999-05-30","1999-06-06","1999-06-13","1999-06-20","1999-06-27","1999-07-04","1999-07-11","1999-07-18","1999-07-25","1999-08-01","1999-08-08","1999-08-15","1999-08-22","1999-08-29","1999-09-05","1999-09-12","1999-09-19","1999-09-26","1999-10-03","1999-10-10","1999-10-17","1999-10-24","1999-10-31","1999-11-07","1999-11-14","1999-11-21","1999-11-28","1999-12-05","1999-12-12","1999-12-19","1999-12-26","2000-01-02","2000-01-09","2000-01-16","2000-01-23","2000-01-30","2000-02-06","2000-02-13","2000-02-20","2000-02-27","2000-03-05","2000-03-12","2000-03-19","2000-03-26","2000-04-02","2000-04-09","2000-04-16","2000-04-23","2000-04-30","2000-05-07","2000-05-14","2000-05-21","2000-05-28","2000-06-04","2000-06-11","2000-06-18","2000-06-25","2000-07-02","2000-07-09","2000-07-16","2000-07-23","2000-07-30","2000-08-06","2000-08-13","2000-08-20","2000-08-27","2000-09-03","2000-09-10","2000-09-17","2000-09-24","2000-10-01","2000-10-08","2000-10-15","2000-10-22","2000-10-29","2000-11-05","2000-11-12","2000-11-19","2000-11-26","2000-12-03","2000-12-10","2000-12-17","2000-12-24","2000-12-31","2001-01-07","2001-01-14","2001-01-21","2001-01-28","2001-02-04","2001-02-11","2001-02-18","2001-02-25","2001-03-04","2001-03-11","2001-03-18","2001-03-25","2001-04-01","2001-04-08","2001-04-15","2001-04-22","2001-04-29","2001-05-06","2001-05-13","2001-05-20","2001-05-27","2001-06-03","2001-06-10","2001-06-17","2001-06-24","2001-07-01","2001-07-08","2001-07-15","2001-07-22","2001-07-29","2001-08-05","2001-08-12","2001-08-19","2001-08-26","2001-09-02","2001-09-09","2001-09-16","2001-09-23","2001-09-30","2001-10-07","2001-10-14","2001-10-21","2001-10-28","2001-11-04","2001-11-11","2001-11-18","2001-11-25","2001-12-02","2001-12-09","2001-12-16","2001-12-23","2001-12-30","2002-01-06","2002-01-13","2002-01-20","2002-01-27","2002-02-03","2002-02-10","2002-02-17","2002-02-24","2002-03-03","2002-03-10","2002-03-17","2002-03-24","2002-03-31","2002-04-07","2002-04-14","2002-04-21","2002-04-28","2002-05-05","2002-05-12","2002-05-19","2002-05-26","2002-06-02","2002-06-09","2002-06-16","2002-06-23","2002-06-30","2002-07-07","2002-07-14","2002-07-21","2002-07-28","2002-08-04","2002-08-11","2002-08-18","2002-08-25","2002-09-01","2002-09-08","2002-09-15","2002-09-22","2002-09-29","2002-10-06","2002-10-13","2002-10-20","2002-10-27","2002-11-03","2002-11-10","2002-11-17","2002-11-24","2002-12-01","2002-12-08","2002-12-15","2002-12-22","2002-12-29","2003-01-05","2003-01-12","2003-01-19","2003-01-26","2003-02-02","2003-02-09","2003-02-16","2003-02-23","2003-03-02","2003-03-09","2003-03-16","2003-03-23","2003-03-30","2003-04-06","2003-04-13","2003-04-20","2003-04-27","2003-05-04","2003-05-11","2003-05-18","2003-05-25","2003-06-01","2003-06-08","2003-06-15","2003-06-22","2003-06-29","2003-07-06","2003-07-13","2003-07-20","2003-07-27","2003-08-03","2003-08-10","2003-08-17","2003-08-24","2003-08-31","2003-09-07","2003-09-14","2003-09-21","2003-09-28","2003-10-05","2003-10-12","2003-10-19","2003-10-26","2003-11-02","2003-11-09","2003-11-16","2003-11-23","2003-11-30","2003-12-07","2003-12-14","2003-12-21","2003-12-28","2004-01-04","2004-01-11","2004-01-18","2004-01-25","2004-02-01","2004-02-08","2004-02-15","2004-02-22","2004-02-29","2004-03-07","2004-03-14","2004-03-21","2004-03-28","2004-04-04","2004-04-11","2004-04-18","2004-04-25","2004-05-02","2004-05-09","2004-05-16","2004-05-23","2004-05-30","2004-06-06","2004-06-13","2004-06-20","2004-06-27","2004-07-04","2004-07-11","2004-07-18","2004-07-25","2004-08-01","2004-08-08","2004-08-15","2004-08-22","2004-08-29","2004-09-05","2004-09-12","2004-09-19","2004-09-26","2004-10-03","2004-10-10","2004-10-17","2004-10-24","2004-10-31","2004-11-07","2004-11-14","2004-11-21","2004-11-28","2004-12-05","2004-12-12","2004-12-19","2004-12-26","2005-01-02","2005-01-09","2005-01-16","2005-01-23","2005-01-30","2005-02-06","2005-02-13","2005-02-20","2005-02-27","2005-03-06","2005-03-13","2005-03-20","2005-03-27","2005-04-03","2005-04-10","2005-04-17","2005-04-24","2005-05-01","2005-05-08","2005-05-15","2005-05-22","2005-05-29","2005-06-05","2005-06-12","2005-06-19","2005-06-26","2005-07-03","2005-07-10","2005-07-17","2005-07-24","2005-07-31","2005-08-07","2005-08-14","2005-08-21","2005-08-28","2005-09-04","2005-09-11","2005-09-18","2005-09-25","2005-10-02","2005-10-09","2005-10-16","2005-10-23","2005-10-30","2005-11-06","2005-11-13","2005-11-20","2005-11-27","2005-12-04","2005-12-11","2005-12-18","2005-12-25","2006-01-01","2006-01-08","2006-01-15","2006-01-22","2006-01-29","2006-02-05","2006-02-12","2006-02-19","2006-02-26","2006-03-05","2006-03-12","2006-03-19","2006-03-26","2006-04-02","2006-04-09","2006-04-16","2006-04-23","2006-04-30","2006-05-07","2006-05-14","2006-05-21","2006-05-28","2006-06-04","2006-06-11","2006-06-18","2006-06-25","2006-07-02","2006-07-09","2006-07-16","2006-07-23","2006-07-30","2006-08-06","2006-08-13","2006-08-20","2006-08-27","2006-09-03","2006-09-10","2006-09-17","2006-09-24","2006-10-01","2006-10-08","2006-10-15","2006-10-22","2006-10-29","2006-11-05","2006-11-12","2006-11-19","2006-11-26","2006-12-03","2006-12-10","2006-12-17","2006-12-24","2006-12-31","2007-01-07","2007-01-14","2007-01-21","2007-01-28","2007-02-04","2007-02-11","2007-02-18","2007-02-25","2007-03-04","2007-03-11","2007-03-18","2007-03-25","2007-04-01","2007-04-08","2007-04-15","2007-04-22","2007-04-29","2007-05-06","2007-05-13","2007-05-20","2007-05-27","2007-06-03","2007-06-10","2007-06-17","2007-06-24","2007-07-01","2007-07-08","2007-07-15","2007-07-22","2007-07-29","2007-08-05","2007-08-12","2007-08-19","2007-08-26","2007-09-02","2007-09-09","2007-09-16","2007-09-23","2007-09-30","2007-10-07","2007-10-14","2007-10-21","2007-10-28","2007-11-04","2007-11-11","2007-11-18","2007-11-25","2007-12-02","2007-12-09","2007-12-16","2007-12-23","2007-12-30","2008-01-06","2008-01-13","2008-01-20","2008-01-27","2008-02-03","2008-02-10","2008-02-17","2008-02-24","2008-03-02","2008-03-09","2008-03-16","2008-03-23","2008-03-30","2008-04-06","2008-04-13","2008-04-20","2008-04-27","2008-05-04","2008-05-11","2008-05-18","2008-05-25","2008-06-01","2008-06-08","2008-06-15","2008-06-22","2008-06-29","2008-07-06","2008-07-13","2008-07-20","2008-07-27","2008-08-03","2008-08-10","2008-08-17","2008-08-24","2008-08-31","2008-09-07","2008-09-14","2008-09-21","2008-09-28","2008-10-05","2008-10-12","2008-10-19","2008-10-26","2008-11-02","2008-11-09","2008-11-16","2008-11-23","2008-11-30","2008-12-07","2008-12-14","2008-12-21","2008-12-28","2009-01-04","2009-01-11","2009-01-18","2009-01-25","2009-02-01","2009-02-08","2009-02-15","2009-02-22","2009-03-01","2009-03-08","2009-03-15","2009-03-22","2009-03-29","2009-04-05","2009-04-12","2009-04-19","2009-04-26","2009-05-03","2009-05-10","2009-05-17","2009-05-24","2009-05-31","2009-06-07","2009-06-14","2009-06-21","2009-06-28","2009-07-05","2009-07-12","2009-07-19","2009-07-26","2009-08-02","2009-08-09","2009-08-16","2009-08-23","2009-08-30","2009-09-06","2009-09-13","2009-09-20","2009-09-27","2009-10-04","2009-10-11","2009-10-18","2009-10-25","2009-11-01","2009-11-08","2009-11-15","2009-11-22","2009-11-29","2009-12-06","2009-12-13","2009-12-20","2009-12-27","2010-01-03","2010-01-10","2010-01-17","2010-01-24","2010-01-31","2010-02-07","2010-02-14","2010-02-21","2010-02-28","2010-03-07","2010-03-14","2010-03-21","2010-03-28","2010-04-04","2010-04-11","2010-04-18","2010-04-25","2010-05-02","2010-05-09","2010-05-16","2010-05-23","2010-05-30","2010-06-06","2010-06-13","2010-06-20","2010-06-27","2010-07-04","2010-07-11","2010-07-18","2010-07-25","2010-08-01","2010-08-08","2010-08-15","2010-08-22","2010-08-29","2010-09-05","2010-09-12","2010-09-19","2010-09-26","2010-10-03","2010-10-10","2010-10-17","2010-10-24","2010-10-31","2010-11-07","2010-11-14","2010-11-21","2010-11-28","2010-12-05","2010-12-12","2010-12-19","2010-12-26","2011-01-02","2011-01-09","2011-01-16","2011-01-23","2011-01-30","2011-02-06","2011-02-13","2011-02-20","2011-02-27","2011-03-06","2011-03-13","2011-03-20","2011-03-27","2011-04-03","2011-04-10","2011-04-17","2011-04-24","2011-05-01","2011-05-08","2011-05-15","2011-05-22","2011-05-29","2011-06-05","2011-06-12","2011-06-19","2011-06-26","2011-07-03","2011-07-10","2011-07-17","2011-07-24","2011-07-31","2011-08-07","2011-08-14","2011-08-21","2011-08-28","2011-09-04","2011-09-11","2011-09-18","2011-09-25","2011-10-02","2011-10-09","2011-10-16","2011-10-23","2011-10-30","2011-11-06","2011-11-13","2011-11-20","2011-11-27","2011-12-04","2011-12-11","2011-12-18","2011-12-25","2012-01-01","2012-01-08","2012-01-15","2012-01-22","2012-01-29","2012-02-05","2012-02-12","2012-02-19","2012-02-26","2012-03-04","2012-03-11","2012-03-18","2012-03-25","2012-04-01","2012-04-08","2012-04-15","2012-04-22","2012-04-29","2012-05-06","2012-05-13","2012-05-20","2012-05-27","2012-06-03","2012-06-10","2012-06-17","2012-06-24","2012-07-01","2012-07-08","2012-07-15","2012-07-22","2012-07-29","2012-08-05","2012-08-12","2012-08-19","2012-08-26","2012-09-02","2012-09-09","2012-09-16","2012-09-23","2012-09-30","2012-10-07","2012-10-14","2012-10-21","2012-10-28","2012-11-04","2012-11-11","2012-11-18","2012-11-25","2012-12-02","2012-12-09","2012-12-16","2012-12-23","2012-12-30","2013-01-06","2013-01-13","2013-01-20","2013-01-27","2013-02-03","2013-02-10","2013-02-17","2013-02-24","2013-03-03","2013-03-10","2013-03-17","2013-03-24","2013-03-31","2013-04-07","2013-04-14","2013-04-21","2013-04-28","2013-05-05","2013-05-12","2013-05-19","2013-05-26","2013-06-02","2013-06-09","2013-06-16","2013-06-23","2013-06-30","2013-07-07","2013-07-14","2013-07-21","2013-07-28","2013-08-04","2013-08-11","2013-08-18","2013-08-25","2013-09-01","2013-09-08","2013-09-15","2013-09-22","2013-09-29","2013-10-06","2013-10-13","2013-10-20","2013-10-27","2013-11-03","2013-11-10","2013-11-17","2013-11-24","2013-12-01","2013-12-08","2013-12-15","2013-12-22","2013-12-29","2014-01-05","2014-01-12","2014-01-19","2014-01-26","2014-02-02","2014-02-09","2014-02-16","2014-02-23","2014-03-02","2014-03-09","2014-03-16","2014-03-23","2014-03-30","2014-04-06","2014-04-13","2014-04-20","2014-04-27","2014-05-04","2014-05-11","2014-05-18","2014-05-25","2014-06-01","2014-06-08","2014-06-15","2014-06-22","2014-06-29","2014-07-06","2014-07-13","2014-07-20","2014-07-27","2014-08-03","2014-08-10","2014-08-17","2014-08-24","2014-08-31","2014-09-07","2014-09-14","2014-09-21","2014-09-28","2014-10-05","2014-10-12","2014-10-19","2014-10-26","2014-11-02","2014-11-09","2014-11-16","2014-11-23","2014-11-30","2014-12-07","2014-12-14","2014-12-21","2014-12-28","2015-01-04","2015-01-11","2015-01-18","2015-01-25","2015-02-01","2015-02-08","2015-02-15","2015-02-22","2015-03-01","2015-03-08","2015-03-15","2015-03-22","2015-03-29","2015-04-05","2015-04-12","2015-04-19","2015-04-26","2015-05-03","2015-05-10","2015-05-17","2015-05-24","2015-05-31","2015-06-07","2015-06-14","2015-06-21","2015-06-28","2015-07-05","2015-07-12","2015-07-19","2015-07-26","2015-08-02","2015-08-09","2015-08-16","2015-08-23","2015-08-30","2015-09-06","2015-09-13","2015-09-20","2015-09-27","2015-10-04","2015-10-11","2015-10-18","2015-10-25","2015-11-01","2015-11-08","2015-11-15","2015-11-22","2015-11-29","2015-12-06","2015-12-13","2015-12-20","2015-12-27","2016-01-03","2016-01-10","2016-01-17","2016-01-24","2016-01-31","2016-02-07","2016-02-14","2016-02-21","2016-02-28","2016-03-06","2016-03-13","2016-03-20","2016-03-27","2016-04-03","2016-04-10","2016-04-17","2016-04-24","2016-05-01","2016-05-08","2016-05-15","2016-05-22","2016-05-29","2016-06-05","2016-06-12","2016-06-19","2016-06-26","2016-07-03","2016-07-10","2016-07-17","2016-07-24","2016-07-31","2016-08-07","2016-08-14","2016-08-21","2016-08-28","2016-09-04","2016-09-11","2016-09-18","2016-09-25","2016-10-02","2016-10-09","2016-10-16","2016-10-23","2016-10-30","2016-11-06","2016-11-13","2016-11-20","2016-11-27","2016-12-04","2016-12-11","2016-12-18","2016-12-25","2017-01-01","2017-01-08","2017-01-15","2017-01-22","2017-01-29","2017-02-05","2017-02-12","2017-02-19","2017-02-26","2017-03-05","2017-03-12","2017-03-19","2017-03-26","2017-04-02","2017-04-09","2017-04-16","2017-04-23","2017-04-30","2017-05-07","2017-05-14","2017-05-21","2017-05-28","2017-06-04","2017-06-11","2017-06-18","2017-06-25","2017-07-02","2017-07-09","2017-07-16","2017-07-23","2017-07-30","2017-08-06","2017-08-13","2017-08-20","2017-08-27","2017-09-03","2017-09-10","2017-09-17","2017-09-24","2017-10-01","2017-10-08","2017-10-15","2017-10-22","2017-10-29","2017-11-05","2017-11-12","2017-11-19","2017-11-26","2017-12-03","2017-12-10","2017-12-17","2017-12-24","2017-12-31","2018-01-07","2018-01-14","2018-01-21","2018-01-28","2018-02-04","2018-02-11","2018-02-18","2018-02-25","2018-03-04","2018-03-11","2018-03-18","2018-03-25","2018-04-01","2018-04-08","2018-04-15","2018-04-22","2018-04-29","2018-05-06","2018-05-13","2018-05-20","2018-05-27","2018-06-03","2018-06-10","2018-06-17","2018-06-24","2018-07-01","2018-07-08","2018-07-15","2018-07-22","2018-07-29","2018-08-05","2018-08-12","2018-08-19","2018-08-26","2018-09-02","2018-09-09","2018-09-16","2018-09-23","2018-09-30","2018-10-07","2018-10-14","2018-10-21","2018-10-28","2018-11-04","2018-11-11","2018-11-18","2018-11-25","2018-12-02","2018-12-09","2018-12-16","2018-12-23","2018-12-30","2019-01-06","2019-01-13","2019-01-20","2019-01-27","2019-02-03","2019-02-10","2019-02-17","2019-02-24","2019-03-03","2019-03-10","2019-03-17","2019-03-24","2019-03-31","2019-04-07","2019-04-14","2019-04-21","2019-04-28","2019-05-05","2019-05-12","2019-05-19","2019-05-26","2019-06-02","2019-06-09","2019-06-16","2019-06-23","2019-06-30","2019-07-07","2019-07-14","2019-07-21","2019-07-28","2019-08-04","2019-08-11","2019-08-18","2019-08-25","2019-09-01","2019-09-08","2019-09-15","2019-09-22","2019-09-29","2019-10-06","2019-10-13","2019-10-20","2019-10-27","2019-11-03","2019-11-10","2019-11-17","2019-11-24","2019-12-01","2019-12-08","2019-12-15","2019-12-22","2019-12-29","2020-01-05","2020-01-12","2020-01-19","2020-01-26","2020-02-02","2020-02-09","2020-02-16","2020-02-23","2020-03-01","2020-03-08","2020-03-15","2020-03-22","2020-03-29","2020-04-05","2020-04-12","2020-04-19","2020-04-26","2020-05-03","2020-05-10","2020-05-17","2020-05-24","2020-05-31","2020-06-07","2020-06-14","2020-06-21","2020-06-28","2020-07-05","2020-07-12","2020-07-19","2020-07-26","2020-08-02","2020-08-09","2020-08-16","2020-08-23","2020-08-30","2020-09-06","2020-09-13","2020-09-20","2020-09-27","2020-10-04","2020-10-11","2020-10-18","2020-10-25","2020-11-01","2020-11-08","2020-11-15","2020-11-22","2020-11-29","2020-12-06","2020-12-13","2020-12-20","2020-12-27","2021-01-03","2021-01-10","2021-01-17","2021-01-24","2021-01-31","2021-02-07","2021-02-14","2021-02-21","2021-02-28","2021-03-07","2021-03-14","2021-03-21","2021-03-28","2021-04-04","2021-04-11","2021-04-18","2021-04-25","2021-05-02","2021-05-09","2021-05-16","2021-05-23","2021-05-30","2021-06-06","2021-06-13","2021-06-20","2021-06-27","2021-07-04","2021-07-11","2021-07-18","2021-07-25","2021-08-01","2021-08-08","2021-08-15","2021-08-22","2021-08-29","2021-09-05","2021-09-12","2021-09-19","2021-09-26","2021-10-03","2021-10-10","2021-10-17","2021-10-24","2021-10-31","2021-11-07","2021-11-14","2021-11-21","2021-11-28","2021-12-05","2021-12-12","2021-12-19","2021-12-26","2022-01-02","2022-01-09","2022-01-16","2022-01-23","2022-01-30","2022-02-06","2022-02-13","2022-02-20","2022-02-27","2022-03-06","2022-03-13","2022-03-20","2022-03-27","2022-04-03","2022-04-10","2022-04-17","2022-04-24","2022-05-01","2022-05-08","2022-05-15","2022-05-22","2022-05-29","2022-06-05","2022-06-12","2022-06-19","2022-06-26","2022-07-03","2022-07-10","2022-07-17","2022-07-24","2022-07-31","2022-08-07","2022-08-14","2022-08-21","2022-08-28","2022-09-04","2022-09-11","2022-09-18","2022-09-25","2022-10-02","2022-10-09","2022-10-16","2022-10-23","2022-10-30","2022-11-06","2022-11-13","2022-11-20","2022-11-27","2022-12-04","2022-12-11","2022-12-18","2022-12-25","2023-01-01","2023-01-08","2023-01-15","2023-01-22","2023-01-29"]),
        'copernicussla': this.constructDateOptions(["1993-01-03","1993-01-10","1993-01-17","1993-01-24","1993-01-31","1993-02-07","1993-02-14","1993-02-21","1993-02-28","1993-03-07","1993-03-14","1993-03-21","1993-03-28","1993-04-04","1993-04-11","1993-04-18","1993-04-25","1993-05-02","1993-05-09","1993-05-16","1993-05-23","1993-05-30","1993-06-06","1993-06-13","1993-06-20","1993-06-27","1993-07-04","1993-07-11","1993-07-18","1993-07-25","1993-08-01","1993-08-08","1993-08-15","1993-08-22","1993-08-29","1993-09-05","1993-09-12","1993-09-19","1993-09-26","1993-10-03","1993-10-10","1993-10-17","1993-10-24","1993-10-31","1993-11-07","1993-11-14","1993-11-21","1993-11-28","1993-12-05","1993-12-12","1993-12-19","1993-12-26","1994-01-02","1994-01-09","1994-01-16","1994-01-23","1994-01-30","1994-02-06","1994-02-13","1994-02-20","1994-02-27","1994-03-06","1994-03-13","1994-03-20","1994-03-27","1994-04-03","1994-04-10","1994-04-17","1994-04-24","1994-05-01","1994-05-08","1994-05-15","1994-05-22","1994-05-29","1994-06-05","1994-06-12","1994-06-19","1994-06-26","1994-07-03","1994-07-10","1994-07-17","1994-07-24","1994-07-31","1994-08-07","1994-08-14","1994-08-21","1994-08-28","1994-09-04","1994-09-11","1994-09-18","1994-09-25","1994-10-02","1994-10-09","1994-10-16","1994-10-23","1994-10-30","1994-11-06","1994-11-13","1994-11-20","1994-11-27","1994-12-04","1994-12-11","1994-12-18","1994-12-25","1995-01-01","1995-01-08","1995-01-15","1995-01-22","1995-01-29","1995-02-05","1995-02-12","1995-02-19","1995-02-26","1995-03-05","1995-03-12","1995-03-19","1995-03-26","1995-04-02","1995-04-09","1995-04-16","1995-04-23","1995-04-30","1995-05-07","1995-05-14","1995-05-21","1995-05-28","1995-06-04","1995-06-11","1995-06-18","1995-06-25","1995-07-02","1995-07-09","1995-07-16","1995-07-23","1995-07-30","1995-08-06","1995-08-13","1995-08-20","1995-08-27","1995-09-03","1995-09-10","1995-09-17","1995-09-24","1995-10-01","1995-10-08","1995-10-15","1995-10-22","1995-10-29","1995-11-05","1995-11-12","1995-11-19","1995-11-26","1995-12-03","1995-12-10","1995-12-17","1995-12-24","1995-12-31","1996-01-07","1996-01-14","1996-01-21","1996-01-28","1996-02-04","1996-02-11","1996-02-18","1996-02-25","1996-03-03","1996-03-10","1996-03-17","1996-03-24","1996-03-31","1996-04-07","1996-04-14","1996-04-21","1996-04-28","1996-05-05","1996-05-12","1996-05-19","1996-05-26","1996-06-02","1996-06-09","1996-06-16","1996-06-23","1996-06-30","1996-07-07","1996-07-14","1996-07-21","1996-07-28","1996-08-04","1996-08-11","1996-08-18","1996-08-25","1996-09-01","1996-09-08","1996-09-15","1996-09-22","1996-09-29","1996-10-06","1996-10-13","1996-10-20","1996-10-27","1996-11-03","1996-11-10","1996-11-17","1996-11-24","1996-12-01","1996-12-08","1996-12-15","1996-12-22","1996-12-29","1997-01-05","1997-01-12","1997-01-19","1997-01-26","1997-02-02","1997-02-09","1997-02-16","1997-02-23","1997-03-02","1997-03-09","1997-03-16","1997-03-23","1997-03-30","1997-04-06","1997-04-13","1997-04-20","1997-04-27","1997-05-04","1997-05-11","1997-05-18","1997-05-25","1997-06-01","1997-06-08","1997-06-15","1997-06-22","1997-06-29","1997-07-06","1997-07-13","1997-07-20","1997-07-27","1997-08-03","1997-08-10","1997-08-17","1997-08-24","1997-08-31","1997-09-07","1997-09-14","1997-09-21","1997-09-28","1997-10-05","1997-10-12","1997-10-19","1997-10-26","1997-11-02","1997-11-09","1997-11-16","1997-11-23","1997-11-30","1997-12-07","1997-12-14","1997-12-21","1997-12-28","1998-01-04","1998-01-11","1998-01-18","1998-01-25","1998-02-01","1998-02-08","1998-02-15","1998-02-22","1998-03-01","1998-03-08","1998-03-15","1998-03-22","1998-03-29","1998-04-05","1998-04-12","1998-04-19","1998-04-26","1998-05-03","1998-05-10","1998-05-17","1998-05-24","1998-05-31","1998-06-07","1998-06-14","1998-06-21","1998-06-28","1998-07-05","1998-07-12","1998-07-19","1998-07-26","1998-08-02","1998-08-09","1998-08-16","1998-08-23","1998-08-30","1998-09-06","1998-09-13","1998-09-20","1998-09-27","1998-10-04","1998-10-11","1998-10-18","1998-10-25","1998-11-01","1998-11-08","1998-11-15","1998-11-22","1998-11-29","1998-12-06","1998-12-13","1998-12-20","1998-12-27","1999-01-03","1999-01-10","1999-01-17","1999-01-24","1999-01-31","1999-02-07","1999-02-14","1999-02-21","1999-02-28","1999-03-07","1999-03-14","1999-03-21","1999-03-28","1999-04-04","1999-04-11","1999-04-18","1999-04-25","1999-05-02","1999-05-09","1999-05-16","1999-05-23","1999-05-30","1999-06-06","1999-06-13","1999-06-20","1999-06-27","1999-07-04","1999-07-11","1999-07-18","1999-07-25","1999-08-01","1999-08-08","1999-08-15","1999-08-22","1999-08-29","1999-09-05","1999-09-12","1999-09-19","1999-09-26","1999-10-03","1999-10-10","1999-10-17","1999-10-24","1999-10-31","1999-11-07","1999-11-14","1999-11-21","1999-11-28","1999-12-05","1999-12-12","1999-12-19","1999-12-26","2000-01-02","2000-01-09","2000-01-16","2000-01-23","2000-01-30","2000-02-06","2000-02-13","2000-02-20","2000-02-27","2000-03-05","2000-03-12","2000-03-19","2000-03-26","2000-04-02","2000-04-09","2000-04-16","2000-04-23","2000-04-30","2000-05-07","2000-05-14","2000-05-21","2000-05-28","2000-06-04","2000-06-11","2000-06-18","2000-06-25","2000-07-02","2000-07-09","2000-07-16","2000-07-23","2000-07-30","2000-08-06","2000-08-13","2000-08-20","2000-08-27","2000-09-03","2000-09-10","2000-09-17","2000-09-24","2000-10-01","2000-10-08","2000-10-15","2000-10-22","2000-10-29","2000-11-05","2000-11-12","2000-11-19","2000-11-26","2000-12-03","2000-12-10","2000-12-17","2000-12-24","2000-12-31","2001-01-07","2001-01-14","2001-01-21","2001-01-28","2001-02-04","2001-02-11","2001-02-18","2001-02-25","2001-03-04","2001-03-11","2001-03-18","2001-03-25","2001-04-01","2001-04-08","2001-04-15","2001-04-22","2001-04-29","2001-05-06","2001-05-13","2001-05-20","2001-05-27","2001-06-03","2001-06-10","2001-06-17","2001-06-24","2001-07-01","2001-07-08","2001-07-15","2001-07-22","2001-07-29","2001-08-05","2001-08-12","2001-08-19","2001-08-26","2001-09-02","2001-09-09","2001-09-16","2001-09-23","2001-09-30","2001-10-07","2001-10-14","2001-10-21","2001-10-28","2001-11-04","2001-11-11","2001-11-18","2001-11-25","2001-12-02","2001-12-09","2001-12-16","2001-12-23","2001-12-30","2002-01-06","2002-01-13","2002-01-20","2002-01-27","2002-02-03","2002-02-10","2002-02-17","2002-02-24","2002-03-03","2002-03-10","2002-03-17","2002-03-24","2002-03-31","2002-04-07","2002-04-14","2002-04-21","2002-04-28","2002-05-05","2002-05-12","2002-05-19","2002-05-26","2002-06-02","2002-06-09","2002-06-16","2002-06-23","2002-06-30","2002-07-07","2002-07-14","2002-07-21","2002-07-28","2002-08-04","2002-08-11","2002-08-18","2002-08-25","2002-09-01","2002-09-08","2002-09-15","2002-09-22","2002-09-29","2002-10-06","2002-10-13","2002-10-20","2002-10-27","2002-11-03","2002-11-10","2002-11-17","2002-11-24","2002-12-01","2002-12-08","2002-12-15","2002-12-22","2002-12-29","2003-01-05","2003-01-12","2003-01-19","2003-01-26","2003-02-02","2003-02-09","2003-02-16","2003-02-23","2003-03-02","2003-03-09","2003-03-16","2003-03-23","2003-03-30","2003-04-06","2003-04-13","2003-04-20","2003-04-27","2003-05-04","2003-05-11","2003-05-18","2003-05-25","2003-06-01","2003-06-08","2003-06-15","2003-06-22","2003-06-29","2003-07-06","2003-07-13","2003-07-20","2003-07-27","2003-08-03","2003-08-10","2003-08-17","2003-08-24","2003-08-31","2003-09-07","2003-09-14","2003-09-21","2003-09-28","2003-10-05","2003-10-12","2003-10-19","2003-10-26","2003-11-02","2003-11-09","2003-11-16","2003-11-23","2003-11-30","2003-12-07","2003-12-14","2003-12-21","2003-12-28","2004-01-04","2004-01-11","2004-01-18","2004-01-25","2004-02-01","2004-02-08","2004-02-15","2004-02-22","2004-02-29","2004-03-07","2004-03-14","2004-03-21","2004-03-28","2004-04-04","2004-04-11","2004-04-18","2004-04-25","2004-05-02","2004-05-09","2004-05-16","2004-05-23","2004-05-30","2004-06-06","2004-06-13","2004-06-20","2004-06-27","2004-07-04","2004-07-11","2004-07-18","2004-07-25","2004-08-01","2004-08-08","2004-08-15","2004-08-22","2004-08-29","2004-09-05","2004-09-12","2004-09-19","2004-09-26","2004-10-03","2004-10-10","2004-10-17","2004-10-24","2004-10-31","2004-11-07","2004-11-14","2004-11-21","2004-11-28","2004-12-05","2004-12-12","2004-12-19","2004-12-26","2005-01-02","2005-01-09","2005-01-16","2005-01-23","2005-01-30","2005-02-06","2005-02-13","2005-02-20","2005-02-27","2005-03-06","2005-03-13","2005-03-20","2005-03-27","2005-04-03","2005-04-10","2005-04-17","2005-04-24","2005-05-01","2005-05-08","2005-05-15","2005-05-22","2005-05-29","2005-06-05","2005-06-12","2005-06-19","2005-06-26","2005-07-03","2005-07-10","2005-07-17","2005-07-24","2005-07-31","2005-08-07","2005-08-14","2005-08-21","2005-08-28","2005-09-04","2005-09-11","2005-09-18","2005-09-25","2005-10-02","2005-10-09","2005-10-16","2005-10-23","2005-10-30","2005-11-06","2005-11-13","2005-11-20","2005-11-27","2005-12-04","2005-12-11","2005-12-18","2005-12-25","2006-01-01","2006-01-08","2006-01-15","2006-01-22","2006-01-29","2006-02-05","2006-02-12","2006-02-19","2006-02-26","2006-03-05","2006-03-12","2006-03-19","2006-03-26","2006-04-02","2006-04-09","2006-04-16","2006-04-23","2006-04-30","2006-05-07","2006-05-14","2006-05-21","2006-05-28","2006-06-04","2006-06-11","2006-06-18","2006-06-25","2006-07-02","2006-07-09","2006-07-16","2006-07-23","2006-07-30","2006-08-06","2006-08-13","2006-08-20","2006-08-27","2006-09-03","2006-09-10","2006-09-17","2006-09-24","2006-10-01","2006-10-08","2006-10-15","2006-10-22","2006-10-29","2006-11-05","2006-11-12","2006-11-19","2006-11-26","2006-12-03","2006-12-10","2006-12-17","2006-12-24","2006-12-31","2007-01-07","2007-01-14","2007-01-21","2007-01-28","2007-02-04","2007-02-11","2007-02-18","2007-02-25","2007-03-04","2007-03-11","2007-03-18","2007-03-25","2007-04-01","2007-04-08","2007-04-15","2007-04-22","2007-04-29","2007-05-06","2007-05-13","2007-05-20","2007-05-27","2007-06-03","2007-06-10","2007-06-17","2007-06-24","2007-07-01","2007-07-08","2007-07-15","2007-07-22","2007-07-29","2007-08-05","2007-08-12","2007-08-19","2007-08-26","2007-09-02","2007-09-09","2007-09-16","2007-09-23","2007-09-30","2007-10-07","2007-10-14","2007-10-21","2007-10-28","2007-11-04","2007-11-11","2007-11-18","2007-11-25","2007-12-02","2007-12-09","2007-12-16","2007-12-23","2007-12-30","2008-01-06","2008-01-13","2008-01-20","2008-01-27","2008-02-03","2008-02-10","2008-02-17","2008-02-24","2008-03-02","2008-03-09","2008-03-16","2008-03-23","2008-03-30","2008-04-06","2008-04-13","2008-04-20","2008-04-27","2008-05-04","2008-05-11","2008-05-18","2008-05-25","2008-06-01","2008-06-08","2008-06-15","2008-06-22","2008-06-29","2008-07-06","2008-07-13","2008-07-20","2008-07-27","2008-08-03","2008-08-10","2008-08-17","2008-08-24","2008-08-31","2008-09-07","2008-09-14","2008-09-21","2008-09-28","2008-10-05","2008-10-12","2008-10-19","2008-10-26","2008-11-02","2008-11-09","2008-11-16","2008-11-23","2008-11-30","2008-12-07","2008-12-14","2008-12-21","2008-12-28","2009-01-04","2009-01-11","2009-01-18","2009-01-25","2009-02-01","2009-02-08","2009-02-15","2009-02-22","2009-03-01","2009-03-08","2009-03-15","2009-03-22","2009-03-29","2009-04-05","2009-04-12","2009-04-19","2009-04-26","2009-05-03","2009-05-10","2009-05-17","2009-05-24","2009-05-31","2009-06-07","2009-06-14","2009-06-21","2009-06-28","2009-07-05","2009-07-12","2009-07-19","2009-07-26","2009-08-02","2009-08-09","2009-08-16","2009-08-23","2009-08-30","2009-09-06","2009-09-13","2009-09-20","2009-09-27","2009-10-04","2009-10-11","2009-10-18","2009-10-25","2009-11-01","2009-11-08","2009-11-15","2009-11-22","2009-11-29","2009-12-06","2009-12-13","2009-12-20","2009-12-27","2010-01-03","2010-01-10","2010-01-17","2010-01-24","2010-01-31","2010-02-07","2010-02-14","2010-02-21","2010-02-28","2010-03-07","2010-03-14","2010-03-21","2010-03-28","2010-04-04","2010-04-11","2010-04-18","2010-04-25","2010-05-02","2010-05-09","2010-05-16","2010-05-23","2010-05-30","2010-06-06","2010-06-13","2010-06-20","2010-06-27","2010-07-04","2010-07-11","2010-07-18","2010-07-25","2010-08-01","2010-08-08","2010-08-15","2010-08-22","2010-08-29","2010-09-05","2010-09-12","2010-09-19","2010-09-26","2010-10-03","2010-10-10","2010-10-17","2010-10-24","2010-10-31","2010-11-07","2010-11-14","2010-11-21","2010-11-28","2010-12-05","2010-12-12","2010-12-19","2010-12-26","2011-01-02","2011-01-09","2011-01-16","2011-01-23","2011-01-30","2011-02-06","2011-02-13","2011-02-20","2011-02-27","2011-03-06","2011-03-13","2011-03-20","2011-03-27","2011-04-03","2011-04-10","2011-04-17","2011-04-24","2011-05-01","2011-05-08","2011-05-15","2011-05-22","2011-05-29","2011-06-05","2011-06-12","2011-06-19","2011-06-26","2011-07-03","2011-07-10","2011-07-17","2011-07-24","2011-07-31","2011-08-07","2011-08-14","2011-08-21","2011-08-28","2011-09-04","2011-09-11","2011-09-18","2011-09-25","2011-10-02","2011-10-09","2011-10-16","2011-10-23","2011-10-30","2011-11-06","2011-11-13","2011-11-20","2011-11-27","2011-12-04","2011-12-11","2011-12-18","2011-12-25","2012-01-01","2012-01-08","2012-01-15","2012-01-22","2012-01-29","2012-02-05","2012-02-12","2012-02-19","2012-02-26","2012-03-04","2012-03-11","2012-03-18","2012-03-25","2012-04-01","2012-04-08","2012-04-15","2012-04-22","2012-04-29","2012-05-06","2012-05-13","2012-05-20","2012-05-27","2012-06-03","2012-06-10","2012-06-17","2012-06-24","2012-07-01","2012-07-08","2012-07-15","2012-07-22","2012-07-29","2012-08-05","2012-08-12","2012-08-19","2012-08-26","2012-09-02","2012-09-09","2012-09-16","2012-09-23","2012-09-30","2012-10-07","2012-10-14","2012-10-21","2012-10-28","2012-11-04","2012-11-11","2012-11-18","2012-11-25","2012-12-02","2012-12-09","2012-12-16","2012-12-23","2012-12-30","2013-01-06","2013-01-13","2013-01-20","2013-01-27","2013-02-03","2013-02-10","2013-02-17","2013-02-24","2013-03-03","2013-03-10","2013-03-17","2013-03-24","2013-03-31","2013-04-07","2013-04-14","2013-04-21","2013-04-28","2013-05-05","2013-05-12","2013-05-19","2013-05-26","2013-06-02","2013-06-09","2013-06-16","2013-06-23","2013-06-30","2013-07-07","2013-07-14","2013-07-21","2013-07-28","2013-08-04","2013-08-11","2013-08-18","2013-08-25","2013-09-01","2013-09-08","2013-09-15","2013-09-22","2013-09-29","2013-10-06","2013-10-13","2013-10-20","2013-10-27","2013-11-03","2013-11-10","2013-11-17","2013-11-24","2013-12-01","2013-12-08","2013-12-15","2013-12-22","2013-12-29","2014-01-05","2014-01-12","2014-01-19","2014-01-26","2014-02-02","2014-02-09","2014-02-16","2014-02-23","2014-03-02","2014-03-09","2014-03-16","2014-03-23","2014-03-30","2014-04-06","2014-04-13","2014-04-20","2014-04-27","2014-05-04","2014-05-11","2014-05-18","2014-05-25","2014-06-01","2014-06-08","2014-06-15","2014-06-22","2014-06-29","2014-07-06","2014-07-13","2014-07-20","2014-07-27","2014-08-03","2014-08-10","2014-08-17","2014-08-24","2014-08-31","2014-09-07","2014-09-14","2014-09-21","2014-09-28","2014-10-05","2014-10-12","2014-10-19","2014-10-26","2014-11-02","2014-11-09","2014-11-16","2014-11-23","2014-11-30","2014-12-07","2014-12-14","2014-12-21","2014-12-28","2015-01-04","2015-01-11","2015-01-18","2015-01-25","2015-02-01","2015-02-08","2015-02-15","2015-02-22","2015-03-01","2015-03-08","2015-03-15","2015-03-22","2015-03-29","2015-04-05","2015-04-12","2015-04-19","2015-04-26","2015-05-03","2015-05-10","2015-05-17","2015-05-24","2015-05-31","2015-06-07","2015-06-14","2015-06-21","2015-06-28","2015-07-05","2015-07-12","2015-07-19","2015-07-26","2015-08-02","2015-08-09","2015-08-16","2015-08-23","2015-08-30","2015-09-06","2015-09-13","2015-09-20","2015-09-27","2015-10-04","2015-10-11","2015-10-18","2015-10-25","2015-11-01","2015-11-08","2015-11-15","2015-11-22","2015-11-29","2015-12-06","2015-12-13","2015-12-20","2015-12-27","2016-01-03","2016-01-10","2016-01-17","2016-01-24","2016-01-31","2016-02-07","2016-02-14","2016-02-21","2016-02-28","2016-03-06","2016-03-13","2016-03-20","2016-03-27","2016-04-03","2016-04-10","2016-04-17","2016-04-24","2016-05-01","2016-05-08","2016-05-15","2016-05-22","2016-05-29","2016-06-05","2016-06-12","2016-06-19","2016-06-26","2016-07-03","2016-07-10","2016-07-17","2016-07-24","2016-07-31","2016-08-07","2016-08-14","2016-08-21","2016-08-28","2016-09-04","2016-09-11","2016-09-18","2016-09-25","2016-10-02","2016-10-09","2016-10-16","2016-10-23","2016-10-30","2016-11-06","2016-11-13","2016-11-20","2016-11-27","2016-12-04","2016-12-11","2016-12-18","2016-12-25","2017-01-01","2017-01-08","2017-01-15","2017-01-22","2017-01-29","2017-02-05","2017-02-12","2017-02-19","2017-02-26","2017-03-05","2017-03-12","2017-03-19","2017-03-26","2017-04-02","2017-04-09","2017-04-16","2017-04-23","2017-04-30","2017-05-07","2017-05-14","2017-05-21","2017-05-28","2017-06-04","2017-06-11","2017-06-18","2017-06-25","2017-07-02","2017-07-09","2017-07-16","2017-07-23","2017-07-30","2017-08-06","2017-08-13","2017-08-20","2017-08-27","2017-09-03","2017-09-10","2017-09-17","2017-09-24","2017-10-01","2017-10-08","2017-10-15","2017-10-22","2017-10-29","2017-11-05","2017-11-12","2017-11-19","2017-11-26","2017-12-03","2017-12-10","2017-12-17","2017-12-24","2017-12-31","2018-01-07","2018-01-14","2018-01-21","2018-01-28","2018-02-04","2018-02-11","2018-02-18","2018-02-25","2018-03-04","2018-03-11","2018-03-18","2018-03-25","2018-04-01","2018-04-08","2018-04-15","2018-04-22","2018-04-29","2018-05-06","2018-05-13","2018-05-20","2018-05-27","2018-06-03","2018-06-10","2018-06-17","2018-06-24","2018-07-01","2018-07-08","2018-07-15","2018-07-22","2018-07-29","2018-08-05","2018-08-12","2018-08-19","2018-08-26","2018-09-02","2018-09-09","2018-09-16","2018-09-23","2018-09-30","2018-10-07","2018-10-14","2018-10-21","2018-10-28","2018-11-04","2018-11-11","2018-11-18","2018-11-25","2018-12-02","2018-12-09","2018-12-16","2018-12-23","2018-12-30","2019-01-06","2019-01-13","2019-01-20","2019-01-27","2019-02-03","2019-02-10","2019-02-17","2019-02-24","2019-03-03","2019-03-10","2019-03-17","2019-03-24","2019-03-31","2019-04-07","2019-04-14","2019-04-21","2019-04-28","2019-05-05","2019-05-12","2019-05-19","2019-05-26","2019-06-02","2019-06-09","2019-06-16","2019-06-23","2019-06-30","2019-07-07","2019-07-14","2019-07-21","2019-07-28","2019-08-04","2019-08-11","2019-08-18","2019-08-25","2019-09-01","2019-09-08","2019-09-15","2019-09-22","2019-09-29","2019-10-06","2019-10-13","2019-10-20","2019-10-27","2019-11-03","2019-11-10","2019-11-17","2019-11-24","2019-12-01","2019-12-08","2019-12-15","2019-12-22","2019-12-29","2020-01-05","2020-01-12","2020-01-19","2020-01-26","2020-02-02","2020-02-09","2020-02-16","2020-02-23","2020-03-01","2020-03-08","2020-03-15","2020-03-22","2020-03-29","2020-04-05","2020-04-12","2020-04-19","2020-04-26","2020-05-03","2020-05-10","2020-05-17","2020-05-24","2020-05-31","2020-06-07","2020-06-14","2020-06-21","2020-06-28","2020-07-05","2020-07-12","2020-07-19","2020-07-26","2020-08-02","2020-08-09","2020-08-16","2020-08-23","2020-08-30","2020-09-06","2020-09-13","2020-09-20","2020-09-27","2020-10-04","2020-10-11","2020-10-18","2020-10-25","2020-11-01","2020-11-08","2020-11-15","2020-11-22","2020-11-29","2020-12-06","2020-12-13","2020-12-20","2020-12-27","2021-01-03","2021-01-10","2021-01-17","2021-01-24","2021-01-31","2021-02-07","2021-02-14","2021-02-21","2021-02-28","2021-03-07","2021-03-14","2021-03-21","2021-03-28","2021-04-04","2021-04-11","2021-04-18","2021-04-25","2021-05-02","2021-05-09","2021-05-16","2021-05-23","2021-05-30","2021-06-06","2021-06-13","2021-06-20","2021-06-27","2021-07-04","2021-07-11","2021-07-18","2021-07-25","2021-08-01","2021-08-08","2021-08-15","2021-08-22","2021-08-29","2021-09-05","2021-09-12","2021-09-19","2021-09-26","2021-10-03","2021-10-10","2021-10-17","2021-10-24","2021-10-31","2021-11-07","2021-11-14","2021-11-21","2021-11-28","2021-12-05","2021-12-12","2021-12-19","2021-12-26","2022-01-02","2022-01-09","2022-01-16","2022-01-23","2022-01-30","2022-02-06","2022-02-13","2022-02-20","2022-02-27","2022-03-06","2022-03-13","2022-03-20","2022-03-27","2022-04-03","2022-04-10","2022-04-17","2022-04-24","2022-05-01","2022-05-08","2022-05-15","2022-05-22","2022-05-29","2022-06-05","2022-06-12","2022-06-19","2022-06-26","2022-07-03","2022-07-10","2022-07-17","2022-07-24"]),
        'ccmpwind': this.constructDateOptions(["1993-01-03","1993-01-10","1993-01-17","1993-01-24","1993-01-31","1993-02-07","1993-02-14","1993-02-21","1993-02-28","1993-03-07","1993-03-14","1993-03-21","1993-03-28","1993-04-04","1993-04-11","1993-04-18","1993-04-25","1993-05-02","1993-05-09","1993-05-16","1993-05-23","1993-05-30","1993-06-06","1993-06-13","1993-06-20","1993-06-27","1993-07-04","1993-07-11","1993-07-18","1993-07-25","1993-08-01","1993-08-08","1993-08-15","1993-08-22","1993-08-29","1993-09-05","1993-09-12","1993-09-19","1993-09-26","1993-10-03","1993-10-10","1993-10-17","1993-10-24","1993-10-31","1993-11-07","1993-11-14","1993-11-21","1993-11-28","1993-12-05","1993-12-12","1993-12-19","1993-12-26","1994-01-02","1994-01-09","1994-01-16","1994-01-23","1994-01-30","1994-02-06","1994-02-13","1994-02-20","1994-02-27","1994-03-06","1994-03-13","1994-03-20","1994-03-27","1994-04-03","1994-04-10","1994-04-17","1994-04-24","1994-05-01","1994-05-08","1994-05-15","1994-05-22","1994-05-29","1994-06-05","1994-06-12","1994-06-19","1994-06-26","1994-07-03","1994-07-10","1994-07-17","1994-07-24","1994-07-31","1994-08-07","1994-08-14","1994-08-21","1994-08-28","1994-09-04","1994-09-11","1994-09-18","1994-09-25","1994-10-02","1994-10-09","1994-10-16","1994-10-23","1994-10-30","1994-11-06","1994-11-13","1994-11-20","1994-11-27","1994-12-04","1994-12-11","1994-12-18","1994-12-25","1995-01-01","1995-01-08","1995-01-15","1995-01-22","1995-01-29","1995-02-05","1995-02-12","1995-02-19","1995-02-26","1995-03-05","1995-03-12","1995-03-19","1995-03-26","1995-04-02","1995-04-09","1995-04-16","1995-04-23","1995-04-30","1995-05-07","1995-05-14","1995-05-21","1995-05-28","1995-06-04","1995-06-11","1995-06-18","1995-06-25","1995-07-02","1995-07-09","1995-07-16","1995-07-23","1995-07-30","1995-08-06","1995-08-13","1995-08-20","1995-08-27","1995-09-03","1995-09-10","1995-09-17","1995-09-24","1995-10-01","1995-10-08","1995-10-15","1995-10-22","1995-10-29","1995-11-05","1995-11-12","1995-11-19","1995-11-26","1995-12-03","1995-12-10","1995-12-17","1995-12-24","1995-12-31","1996-01-07","1996-01-14","1996-01-21","1996-01-28","1996-02-04","1996-02-11","1996-02-18","1996-02-25","1996-03-03","1996-03-10","1996-03-17","1996-03-24","1996-03-31","1996-04-07","1996-04-14","1996-04-21","1996-04-28","1996-05-05","1996-05-12","1996-05-19","1996-05-26","1996-06-02","1996-06-09","1996-06-16","1996-06-23","1996-06-30","1996-07-07","1996-07-14","1996-07-21","1996-07-28","1996-08-04","1996-08-11","1996-08-18","1996-08-25","1996-09-01","1996-09-08","1996-09-15","1996-09-22","1996-09-29","1996-10-06","1996-10-13","1996-10-20","1996-10-27","1996-11-03","1996-11-10","1996-11-17","1996-11-24","1996-12-01","1996-12-08","1996-12-15","1996-12-22","1996-12-29","1997-01-05","1997-01-12","1997-01-19","1997-01-26","1997-02-02","1997-02-09","1997-02-16","1997-02-23","1997-03-02","1997-03-09","1997-03-16","1997-03-23","1997-03-30","1997-04-06","1997-04-13","1997-04-20","1997-04-27","1997-05-04","1997-05-11","1997-05-18","1997-05-25","1997-06-01","1997-06-08","1997-06-15","1997-06-22","1997-06-29","1997-07-06","1997-07-13","1997-07-20","1997-07-27","1997-08-03","1997-08-10","1997-08-17","1997-08-24","1997-08-31","1997-09-07","1997-09-14","1997-09-21","1997-09-28","1997-10-05","1997-10-12","1997-10-19","1997-10-26","1997-11-02","1997-11-09","1997-11-16","1997-11-23","1997-11-30","1997-12-07","1997-12-14","1997-12-21","1997-12-28","1998-01-04","1998-01-11","1998-01-18","1998-01-25","1998-02-01","1998-02-08","1998-02-15","1998-02-22","1998-03-01","1998-03-08","1998-03-15","1998-03-22","1998-03-29","1998-04-05","1998-04-12","1998-04-19","1998-04-26","1998-05-03","1998-05-10","1998-05-17","1998-05-24","1998-05-31","1998-06-07","1998-06-14","1998-06-21","1998-06-28","1998-07-05","1998-07-12","1998-07-19","1998-07-26","1998-08-02","1998-08-09","1998-08-16","1998-08-23","1998-08-30","1998-09-06","1998-09-13","1998-09-20","1998-09-27","1998-10-04","1998-10-11","1998-10-18","1998-10-25","1998-11-01","1998-11-08","1998-11-15","1998-11-22","1998-11-29","1998-12-06","1998-12-13","1998-12-20","1998-12-27","1999-01-03","1999-01-10","1999-01-17","1999-01-24","1999-01-31","1999-02-07","1999-02-14","1999-02-21","1999-02-28","1999-03-07","1999-03-14","1999-03-21","1999-03-28","1999-04-04","1999-04-11","1999-04-18","1999-04-25","1999-05-02","1999-05-09","1999-05-16","1999-05-23","1999-05-30","1999-06-06","1999-06-13","1999-06-20","1999-06-27","1999-07-04","1999-07-11","1999-07-18","1999-07-25","1999-08-01","1999-08-08","1999-08-15","1999-08-22","1999-08-29","1999-09-05","1999-09-12","1999-09-19","1999-09-26","1999-10-03","1999-10-10","1999-10-17","1999-10-24","1999-10-31","1999-11-07","1999-11-14","1999-11-21","1999-11-28","1999-12-05","1999-12-12","1999-12-19","1999-12-26","2000-01-02","2000-01-09","2000-01-16","2000-01-23","2000-01-30","2000-02-06","2000-02-13","2000-02-20","2000-02-27","2000-03-05","2000-03-12","2000-03-19","2000-03-26","2000-04-02","2000-04-09","2000-04-16","2000-04-23","2000-04-30","2000-05-07","2000-05-14","2000-05-21","2000-05-28","2000-06-04","2000-06-11","2000-06-18","2000-06-25","2000-07-02","2000-07-09","2000-07-16","2000-07-23","2000-07-30","2000-08-06","2000-08-13","2000-08-20","2000-08-27","2000-09-03","2000-09-10","2000-09-17","2000-09-24","2000-10-01","2000-10-08","2000-10-15","2000-10-22","2000-10-29","2000-11-05","2000-11-12","2000-11-19","2000-11-26","2000-12-03","2000-12-10","2000-12-17","2000-12-24","2000-12-31","2001-01-07","2001-01-14","2001-01-21","2001-01-28","2001-02-04","2001-02-11","2001-02-18","2001-02-25","2001-03-04","2001-03-11","2001-03-18","2001-03-25","2001-04-01","2001-04-08","2001-04-15","2001-04-22","2001-04-29","2001-05-06","2001-05-13","2001-05-20","2001-05-27","2001-06-03","2001-06-10","2001-06-17","2001-06-24","2001-07-01","2001-07-08","2001-07-15","2001-07-22","2001-07-29","2001-08-05","2001-08-12","2001-08-19","2001-08-26","2001-09-02","2001-09-09","2001-09-16","2001-09-23","2001-09-30","2001-10-07","2001-10-14","2001-10-21","2001-10-28","2001-11-04","2001-11-11","2001-11-18","2001-11-25","2001-12-02","2001-12-09","2001-12-16","2001-12-23","2001-12-30","2002-01-06","2002-01-13","2002-01-20","2002-01-27","2002-02-03","2002-02-10","2002-02-17","2002-02-24","2002-03-03","2002-03-10","2002-03-17","2002-03-24","2002-03-31","2002-04-07","2002-04-14","2002-04-21","2002-04-28","2002-05-05","2002-05-12","2002-05-19","2002-05-26","2002-06-02","2002-06-09","2002-06-16","2002-06-23","2002-06-30","2002-07-07","2002-07-14","2002-07-21","2002-07-28","2002-08-04","2002-08-11","2002-08-18","2002-08-25","2002-09-01","2002-09-08","2002-09-15","2002-09-22","2002-09-29","2002-10-06","2002-10-13","2002-10-20","2002-10-27","2002-11-03","2002-11-10","2002-11-17","2002-11-24","2002-12-01","2002-12-08","2002-12-15","2002-12-22","2002-12-29","2003-01-05","2003-01-12","2003-01-19","2003-01-26","2003-02-02","2003-02-09","2003-02-16","2003-02-23","2003-03-02","2003-03-09","2003-03-16","2003-03-23","2003-03-30","2003-04-06","2003-04-13","2003-04-20","2003-04-27","2003-05-04","2003-05-11","2003-05-18","2003-05-25","2003-06-01","2003-06-08","2003-06-15","2003-06-22","2003-06-29","2003-07-06","2003-07-13","2003-07-20","2003-07-27","2003-08-03","2003-08-10","2003-08-17","2003-08-24","2003-08-31","2003-09-07","2003-09-14","2003-09-21","2003-09-28","2003-10-05","2003-10-12","2003-10-19","2003-10-26","2003-11-02","2003-11-09","2003-11-16","2003-11-23","2003-11-30","2003-12-07","2003-12-14","2003-12-21","2003-12-28","2004-01-04","2004-01-11","2004-01-18","2004-01-25","2004-02-01","2004-02-08","2004-02-15","2004-02-22","2004-02-29","2004-03-07","2004-03-14","2004-03-21","2004-03-28","2004-04-04","2004-04-11","2004-04-18","2004-04-25","2004-05-02","2004-05-09","2004-05-16","2004-05-23","2004-05-30","2004-06-06","2004-06-13","2004-06-20","2004-06-27","2004-07-04","2004-07-11","2004-07-18","2004-07-25","2004-08-01","2004-08-08","2004-08-15","2004-08-22","2004-08-29","2004-09-05","2004-09-12","2004-09-19","2004-09-26","2004-10-03","2004-10-10","2004-10-17","2004-10-24","2004-10-31","2004-11-07","2004-11-14","2004-11-21","2004-11-28","2004-12-05","2004-12-12","2004-12-19","2004-12-26","2005-01-02","2005-01-09","2005-01-16","2005-01-23","2005-01-30","2005-02-06","2005-02-13","2005-02-20","2005-02-27","2005-03-06","2005-03-13","2005-03-20","2005-03-27","2005-04-03","2005-04-10","2005-04-17","2005-04-24","2005-05-01","2005-05-08","2005-05-15","2005-05-22","2005-05-29","2005-06-05","2005-06-12","2005-06-19","2005-06-26","2005-07-03","2005-07-10","2005-07-17","2005-07-24","2005-07-31","2005-08-07","2005-08-14","2005-08-21","2005-08-28","2005-09-04","2005-09-11","2005-09-18","2005-09-25","2005-10-02","2005-10-09","2005-10-16","2005-10-23","2005-10-30","2005-11-06","2005-11-13","2005-11-20","2005-11-27","2005-12-04","2005-12-11","2005-12-18","2005-12-25","2006-01-01","2006-01-08","2006-01-15","2006-01-22","2006-01-29","2006-02-05","2006-02-12","2006-02-19","2006-02-26","2006-03-05","2006-03-12","2006-03-19","2006-03-26","2006-04-02","2006-04-09","2006-04-16","2006-04-23","2006-04-30","2006-05-07","2006-05-14","2006-05-21","2006-05-28","2006-06-04","2006-06-11","2006-06-18","2006-06-25","2006-07-02","2006-07-09","2006-07-16","2006-07-23","2006-07-30","2006-08-06","2006-08-13","2006-08-20","2006-08-27","2006-09-03","2006-09-10","2006-09-17","2006-09-24","2006-10-01","2006-10-08","2006-10-15","2006-10-22","2006-10-29","2006-11-05","2006-11-12","2006-11-19","2006-11-26","2006-12-03","2006-12-10","2006-12-17","2006-12-24","2006-12-31","2007-01-07","2007-01-14","2007-01-21","2007-01-28","2007-02-04","2007-02-11","2007-02-18","2007-02-25","2007-03-04","2007-03-11","2007-03-18","2007-03-25","2007-04-01","2007-04-08","2007-04-15","2007-04-22","2007-04-29","2007-05-06","2007-05-13","2007-05-20","2007-05-27","2007-06-03","2007-06-10","2007-06-17","2007-06-24","2007-07-01","2007-07-08","2007-07-15","2007-07-22","2007-07-29","2007-08-05","2007-08-12","2007-08-19","2007-08-26","2007-09-02","2007-09-09","2007-09-16","2007-09-23","2007-09-30","2007-10-07","2007-10-14","2007-10-21","2007-10-28","2007-11-04","2007-11-11","2007-11-18","2007-11-25","2007-12-02","2007-12-09","2007-12-16","2007-12-23","2007-12-30","2008-01-06","2008-01-13","2008-01-20","2008-01-27","2008-02-03","2008-02-10","2008-02-17","2008-02-24","2008-03-02","2008-03-09","2008-03-16","2008-03-23","2008-03-30","2008-04-06","2008-04-13","2008-04-20","2008-04-27","2008-05-04","2008-05-11","2008-05-18","2008-05-25","2008-06-01","2008-06-08","2008-06-15","2008-06-22","2008-06-29","2008-07-06","2008-07-13","2008-07-20","2008-07-27","2008-08-03","2008-08-10","2008-08-17","2008-08-24","2008-08-31","2008-09-07","2008-09-14","2008-09-21","2008-09-28","2008-10-05","2008-10-12","2008-10-19","2008-10-26","2008-11-02","2008-11-09","2008-11-16","2008-11-23","2008-11-30","2008-12-07","2008-12-14","2008-12-21","2008-12-28","2009-01-04","2009-01-11","2009-01-18","2009-01-25","2009-02-01","2009-02-08","2009-02-15","2009-02-22","2009-03-01","2009-03-08","2009-03-15","2009-03-22","2009-03-29","2009-04-05","2009-04-12","2009-04-19","2009-04-26","2009-05-03","2009-05-10","2009-05-17","2009-05-24","2009-05-31","2009-06-07","2009-06-14","2009-06-21","2009-06-28","2009-07-05","2009-07-12","2009-07-19","2009-07-26","2009-08-02","2009-08-09","2009-08-16","2009-08-23","2009-08-30","2009-09-06","2009-09-13","2009-09-20","2009-09-27","2009-10-04","2009-10-11","2009-10-18","2009-10-25","2009-11-01","2009-11-08","2009-11-15","2009-11-22","2009-11-29","2009-12-06","2009-12-13","2009-12-20","2009-12-27","2010-01-03","2010-01-10","2010-01-17","2010-01-24","2010-01-31","2010-02-07","2010-02-14","2010-02-21","2010-02-28","2010-03-07","2010-03-14","2010-03-21","2010-03-28","2010-04-04","2010-04-11","2010-04-18","2010-04-25","2010-05-02","2010-05-09","2010-05-16","2010-05-23","2010-05-30","2010-06-06","2010-06-13","2010-06-20","2010-06-27","2010-07-04","2010-07-11","2010-07-18","2010-07-25","2010-08-01","2010-08-08","2010-08-15","2010-08-22","2010-08-29","2010-09-05","2010-09-12","2010-09-19","2010-09-26","2010-10-03","2010-10-10","2010-10-17","2010-10-24","2010-10-31","2010-11-07","2010-11-14","2010-11-21","2010-11-28","2010-12-05","2010-12-12","2010-12-19","2010-12-26","2011-01-02","2011-01-09","2011-01-16","2011-01-23","2011-01-30","2011-02-06","2011-02-13","2011-02-20","2011-02-27","2011-03-06","2011-03-13","2011-03-20","2011-03-27","2011-04-03","2011-04-10","2011-04-17","2011-04-24","2011-05-01","2011-05-08","2011-05-15","2011-05-22","2011-05-29","2011-06-05","2011-06-12","2011-06-19","2011-06-26","2011-07-03","2011-07-10","2011-07-17","2011-07-24","2011-07-31","2011-08-07","2011-08-14","2011-08-21","2011-08-28","2011-09-04","2011-09-11","2011-09-18","2011-09-25","2011-10-02","2011-10-09","2011-10-16","2011-10-23","2011-10-30","2011-11-06","2011-11-13","2011-11-20","2011-11-27","2011-12-04","2011-12-11","2011-12-18","2011-12-25","2012-01-01","2012-01-08","2012-01-15","2012-01-22","2012-01-29","2012-02-05","2012-02-12","2012-02-19","2012-02-26","2012-03-04","2012-03-11","2012-03-18","2012-03-25","2012-04-01","2012-04-08","2012-04-15","2012-04-22","2012-04-29","2012-05-06","2012-05-13","2012-05-20","2012-05-27","2012-06-03","2012-06-10","2012-06-17","2012-06-24","2012-07-01","2012-07-08","2012-07-15","2012-07-22","2012-07-29","2012-08-05","2012-08-12","2012-08-19","2012-08-26","2012-09-02","2012-09-09","2012-09-16","2012-09-23","2012-09-30","2012-10-07","2012-10-14","2012-10-21","2012-10-28","2012-11-04","2012-11-11","2012-11-18","2012-11-25","2012-12-02","2012-12-09","2012-12-16","2012-12-23","2012-12-30","2013-01-06","2013-01-13","2013-01-20","2013-01-27","2013-02-03","2013-02-10","2013-02-17","2013-02-24","2013-03-03","2013-03-10","2013-03-17","2013-03-24","2013-03-31","2013-04-07","2013-04-14","2013-04-21","2013-04-28","2013-05-05","2013-05-12","2013-05-19","2013-05-26","2013-06-02","2013-06-09","2013-06-16","2013-06-23","2013-06-30","2013-07-07","2013-07-14","2013-07-21","2013-07-28","2013-08-04","2013-08-11","2013-08-18","2013-08-25","2013-09-01","2013-09-08","2013-09-15","2013-09-22","2013-09-29","2013-10-06","2013-10-13","2013-10-20","2013-10-27","2013-11-03","2013-11-10","2013-11-17","2013-11-24","2013-12-01","2013-12-08","2013-12-15","2013-12-22","2013-12-29","2014-01-05","2014-01-12","2014-01-19","2014-01-26","2014-02-02","2014-02-09","2014-02-16","2014-02-23","2014-03-02","2014-03-09","2014-03-16","2014-03-23","2014-03-30","2014-04-06","2014-04-13","2014-04-20","2014-04-27","2014-05-04","2014-05-11","2014-05-18","2014-05-25","2014-06-01","2014-06-08","2014-06-15","2014-06-22","2014-06-29","2014-07-06","2014-07-13","2014-07-20","2014-07-27","2014-08-03","2014-08-10","2014-08-17","2014-08-24","2014-08-31","2014-09-07","2014-09-14","2014-09-21","2014-09-28","2014-10-05","2014-10-12","2014-10-19","2014-10-26","2014-11-02","2014-11-09","2014-11-16","2014-11-23","2014-11-30","2014-12-07","2014-12-14","2014-12-21","2014-12-28","2015-01-04","2015-01-11","2015-01-18","2015-01-25","2015-02-01","2015-02-08","2015-02-15","2015-02-22","2015-03-01","2015-03-08","2015-03-15","2015-03-22","2015-03-29","2015-04-05","2015-04-12","2015-04-19","2015-04-26","2015-05-03","2015-05-10","2015-05-17","2015-05-24","2015-05-31","2015-06-07","2015-06-14","2015-06-21","2015-06-28","2015-07-05","2015-07-12","2015-07-19","2015-07-26","2015-08-02","2015-08-09","2015-08-16","2015-08-23","2015-08-30","2015-09-06","2015-09-13","2015-09-20","2015-09-27","2015-10-04","2015-10-11","2015-10-18","2015-10-25","2015-11-01","2015-11-08","2015-11-15","2015-11-22","2015-11-29","2015-12-06","2015-12-13","2015-12-20","2015-12-27","2016-01-03","2016-01-10","2016-01-17","2016-01-24","2016-01-31","2016-02-07","2016-02-14","2016-02-21","2016-02-28","2016-03-06","2016-03-13","2016-03-20","2016-03-27","2016-04-03","2016-04-10","2016-04-17","2016-04-24","2016-05-01","2016-05-08","2016-05-15","2016-05-22","2016-05-29","2016-06-05","2016-06-12","2016-06-19","2016-06-26","2016-07-03","2016-07-10","2016-07-17","2016-07-24","2016-07-31","2016-08-07","2016-08-14","2016-08-21","2016-08-28","2016-09-04","2016-09-11","2016-09-18","2016-09-25","2016-10-02","2016-10-09","2016-10-16","2016-10-23","2016-10-30","2016-11-06","2016-11-13","2016-11-20","2016-11-27","2016-12-04","2016-12-11","2016-12-18","2016-12-25","2017-01-01","2017-01-08","2017-01-15","2017-01-22","2017-01-29","2017-02-05","2017-02-12","2017-02-19","2017-02-26","2017-03-05","2017-03-12","2017-03-19","2017-03-26","2017-04-02","2017-04-09","2017-04-16","2017-04-23","2017-04-30","2017-05-07","2017-05-14","2017-05-21","2017-05-28","2017-06-04","2017-06-11","2017-06-18","2017-06-25","2017-07-02","2017-07-09","2017-07-16","2017-07-23","2017-07-30","2017-08-06","2017-08-13","2017-08-20","2017-08-27","2017-09-03","2017-09-10","2017-09-17","2017-09-24","2017-10-01","2017-10-08","2017-10-15","2017-10-22","2017-10-29","2017-11-05","2017-11-12","2017-11-19","2017-11-26","2017-12-03","2017-12-10","2017-12-17","2017-12-24","2017-12-31","2018-01-07","2018-01-14","2018-01-21","2018-01-28","2018-02-04","2018-02-11","2018-02-18","2018-02-25","2018-03-04","2018-03-11","2018-03-18","2018-03-25","2018-04-01","2018-04-08","2018-04-15","2018-04-22","2018-04-29","2018-05-06","2018-05-13","2018-05-20","2018-05-27","2018-06-03","2018-06-10","2018-06-17","2018-06-24","2018-07-01","2018-07-08","2018-07-15","2018-07-22","2018-07-29","2018-08-05","2018-08-12","2018-08-19","2018-08-26","2018-09-02","2018-09-09","2018-09-16","2018-09-23","2018-09-30","2018-10-07","2018-10-14","2018-10-21","2018-10-28","2018-11-04","2018-11-11","2018-11-18","2018-11-25","2018-12-02","2018-12-09","2018-12-16","2018-12-23","2018-12-30","2019-01-06","2019-01-13","2019-01-20","2019-01-27","2019-02-03","2019-02-10","2019-02-17","2019-02-24","2019-03-03","2019-03-10","2019-03-17","2019-03-24","2019-03-31","2019-04-07","2019-04-14","2019-04-21","2019-04-28","2019-05-05","2019-05-12","2019-05-19","2019-05-26","2019-06-02","2019-06-09","2019-06-16","2019-06-23","2019-06-30","2019-07-07","2019-07-14","2019-07-21","2019-07-28","2019-08-04","2019-08-11","2019-08-18","2019-08-25","2019-09-01","2019-09-08","2019-09-15","2019-09-22","2019-09-29","2019-10-06","2019-10-13","2019-10-20","2019-10-27","2019-11-03","2019-11-10","2019-11-17","2019-11-24","2019-12-01","2019-12-08","2019-12-15","2019-12-22","2019-12-29"])
      }[this.state.lattice]
      this.state.subtimestep = q.has('subtimestep') ? q.get('subtimestep') : '1993-01-03'
      this.reflink = {
        'noaasst': 'https://psl.noaa.gov/data/gridded/data.noaa.oisst.v2.html',
        'copernicussla': 'https://doi.org/10.24381/cds.4c328c78',
        'ccmpwind': 'https://www.remss.com/DOI/RSS-uv6h30.html'
      }[this.state.lattice]
      this.state.title = this.chooseTitle(this.state.lattice, this.state.grid)
	  this.variables = {
        'noaasst': this.constructVarOptions(['sst'], x=>x),
        'copernicussla': this.constructVarOptions(["sla","adt","ugosa","ugos","vgosa","vgos"], x=>x),
        'ccmpwind': this.constructVarOptions(['uwnd', 'vwnd', 'ws', 'nobs'], x=>x)
	  }[this.state.lattice]
      this.state.gridsize = {
        'noaasst': 1,
        'copernicussla': 0.25,
        'ccmpwind': 0.25
      }[this.state.lattice]

      this.fgRef = React.createRef()
      this.statusReporting = React.createRef()
      this.formRef = React.createRef()
      this.scales = {
        'noaasst': '',
        'copernicussla': '',
        'ccmpwind': ''
      }[this.state.lattice]
      this.apiPrefix = 'https://argovis-api.colorado.edu/'
      this.customQueryParams = ['polygon', 'grid', 'levelindex', 'sublevelindex', 'timestep', 'subtimestep', 'subgrid']
      this.vocab = {}
    
      this.state.urls = this.generateURLs(this.state)
      this.downloadData()
    }

    componentDidUpdate(prevProps, prevState, snapshot){
    	helpers.phaseManager.bind(this)(prevProps, prevState, snapshot)
    }

    downloadData(){
        console.log(this.state.urls)
        Promise.all(this.state.urls.map(x => fetch(x, {headers:{'x-argokey': this.state.apiKey}}))).then(responses => {
            Promise.all(responses.map(res => res.json())).then(data => {
                for(let i=0; i<data.length; i++){
                    let bail = helpers.handleHTTPcodes.bind(this)(data[i].code)
                    if(bail){
                        return
                    }
                }

                this.setState({
                    phase: 'remapData',
                    data: data
                })

            })
        })
    }

    replot(){
        let s = {...this.state}

        if(this.state.subgrid && this.state.data.length === 2){
            // munge state.data[0] and state.data[1] into profile-like objects where the data value is the delta

            /// start by turning grids into kv keyed by unique concatenation of lon/lat so we can easily subtract the correct pairs of points
            let grid1 = {}
            for(let i=0; i<s.data[0].length; i++){
                grid1['' + s.data[0][i].geolocation.coordinates[0] + s.data[0][i].geolocation.coordinates[1]] = {
                    geolocation: s.data[0][i].geolocation,
                    data: s.data[0][i].data
                }
            }
            let grid2 = {}
            for(let i=0; i<s.data[1].length; i++){
                grid2['' + s.data[1][i].geolocation.coordinates[0] + s.data[1][i].geolocation.coordinates[1]] = {
                    geolocation: s.data[1][i].geolocation,
                    data: s.data[1][i].data
                }
            }
            /// subrtract grids, produce a list of objects that is 'profile-like' where data are the delta values
            s.data = [[]]
            for(let i=0; i<Object.keys(grid1).length; i++){
                let key = Object.keys(grid1)[i]
                if(Object.keys(grid2).includes(key)){
                    s.data[0].push({
                        geolocation: grid1[key].geolocation,
                        data: [[grid1[key].data[0][0] - grid2[key].data[0][0]]]
                    })
                }
            }

        } 

        // determining colorscale min and max
        let values = s.data[0].map(x=>x.data[0][0]).filter(x=>x!==null)
        if(!s.user_defined_min){
            s.display_min = this.unitTransform(Math.min(...values), this.scales)
        }
        if(!s.user_defined_max){
            s.display_max = this.unitTransform(Math.max(...values), this.scales)
        }
        let min = this.state.user_defined_min ? this.inverseTransform(s.display_min, this.scales) : Math.min(...values)
        let max = this.state.user_defined_max ? this.inverseTransform(s.display_max, this.scales) : Math.max(...values)
        
        // catch for when data vectors come up empty
        if(min === Infinity || min === -Infinity || 
           max === Infinity || max === -Infinity){
            min = 0
            max = 1
        }

        s = this.setScale(min, max, s)

        this.setState({
                ...s, 
                gridcells: this.gridRasterfy(s), 
                min: this.state.user_defined_min ? this.state.min : min, 
                max: this.state.user_defined_max ? this.state.max : max, 
                phase: 'idle',
                suppressBlur: false
            }
        )
    }

    generateURLs(params){
        let lattice = params.hasOwnProperty('lattice') ? params.lattice : this.state.lattice
        let grid = params.hasOwnProperty('grid') ? params.grid : this.state.grid
        let timestep = params.hasOwnProperty('timestep') ? params.timestep : this.state.timestep
        let levelindex = params.hasOwnProperty('levelindex') ? params.levelindex : this.state.levelindex
        let subtimestep = params.hasOwnProperty('subtimestep') && params.subtimestep !== null ? params.subtimestep : this.state.subtimestep
        let sublevelindex = params.hasOwnProperty('sublevelindex') ? params.sublevelindex : this.state.sublevelindex
        let polygon = params.hasOwnProperty('polygon') ? params.polygon : this.state.polygon
        let subgrid = params.hasOwnProperty('subgrid') ? params.subgrid : this.state
        let urls = []
        let url    = this.apiPrefix + 'timeseries/' + lattice+'?data='+grid+'&startDate='+timestep+'T00:00:00Z&endDate='+timestep+'T00:00:01Z&verticalRange='+(this.rawLevels[levelindex]-0.1)+','+(this.rawLevels[levelindex]+0.1)
        let suburl = this.apiPrefix + 'timeseries/' + lattice+'?data='+grid+'&startDate='+subtimestep+'T00:00:00Z&endDate='+subtimestep+'T00:00:01Z&verticalRange='+(this.rawLevels[sublevelindex]-0.1)+','+(this.rawLevels[sublevelindex]+0.1)
        if(polygon.length > 0){
            url += '&polygon='+JSON.stringify(helpers.tidypoly(polygon))
            suburl += '&polygon='+JSON.stringify(helpers.tidypoly(polygon))
        }

        urls.push(url)
        if(subgrid){
            urls.push(suburl)
        }

        return urls
    }

	chooseTitle(lattice, grid){
        return {
            ccmpwind: `CCMP Wind (${grid})`,
            noaasst: `NOAA OISSTv2`,
            copernicussla: `Copernicus SLA (${grid})`
        }[lattice]
	}

	chooseUnits(lattice, grid){
        return {
            ccmpwind: {
                uwnd: 'm/s',
                vwnd: 'm/s',
                ws: 'm/s',
                nobs: 'n/a'
            }[grid],
            noaasst: 'Celsius',
            copernicussla: {
                "sla":"m",
                "adt":"m",
                "ugosa":"m/s",
                "ugos":"m/s",
                "vgosa":"m/s",
                "vgos":"m/s"
            }[grid]
        }[lattice]
	}

    // input handlers
    changeLevel(target, index){
    	let s = {...this.state}

    	s[index] = parseInt(target.target.value)
        let levelindex = index === 'levelindex' ? target.target.value : null
        let sublevelindex = index === 'sublevelindex' ? target.target.value : null
    	s.phase = 'refreshData'
		s.user_defined_min = false
		s.user_defined_max = false

        let params = {}
        if(levelindex !== null){
            params.levelindex = parseInt(levelindex)
        }
        if(sublevelindex !== null){
            params.sublevelindex = parseInt(sublevelindex)
        }
        s.urls = this.generateURLs(params)

        this.setState(s)
    }

    changeDate(target, index){
    	let s = {...this.state}

    	s[index] = target.target.value
    	s.phase = 'refreshData'
		s.user_defined_min = false
		s.user_defined_max = false
        s.urls = this.generateURLs(s)
    	
        this.setState(s)
    }

    changeVariable(target){
    	let s = {...this.state}

    	s.grid = target.target.value
		s.title = this.chooseTitle(s.lattice, target.target.value)
    	s.phase = 'refreshData'
		s.user_defined_min = false
		s.user_defined_max = false
        s.urls = this.generateURLs({grid: target.target.value})
    	
        this.setState(s)
    }

    changeRange(e, index){
        let s = {...this.state}

        s.phase = 'awaitingUserInput'
        s[index] = e.target.value
        
        this.setState(s)
    }

    toggleSubgrid(e){
    	let s = {...this.state}
        
        s.urls = this.generateURLs(s)
        s.subgrid = !s.subgrid
        s.phase = 'refreshData'
		s.user_defined_min = false
		s.user_defined_max = false

        this.setState(s)
    }

    // mungers
    constructLevelOptions(levels){
    	return levels.map((x,i) => {return(
    			<option key={x+i} value={i}>{x}</option>
    		)})
    }

    constructDateOptions(dates){
    	return dates.map((x,i) => {return(
    			<option key={x+i} value={x}>{x}</option>
    		)})
    }

    constructVarOptions(values, namemapper){
    	return values.map((x,i) => {return(
    			<option key={x+i} value={x}>{namemapper(x)}</option>
    		)})
    }

    gridRasterfy(state){
    	// expects a list from a data endpoint
        if(state.data.hasOwnProperty('code') || state.data[0].hasOwnProperty('code')){
            return null
        }
        else {
            let points = state.data[0].map(point => {return(
                <Rectangle 
                    key={Math.random()} 
                    bounds={[[point.geolocation.coordinates[1]-state.gridsize/2, helpers.mutateLongitude(point.geolocation.coordinates[0], parseFloat(state.centerlon))-state.gridsize/2],[point.geolocation.coordinates[1]+state.gridsize/2, helpers.mutateLongitude(point.geolocation.coordinates[0], parseFloat(state.centerlon))+state.gridsize/2]]} 
                    pathOptions={{ 
                        fillOpacity: 0.5, 
                        weight: 0, 
                        color: this.chooseColor(point.data[0][0], state) 
                    }}>
                    {this.genTooltip(point)}
                </Rectangle>
            )})
            return points
        }
    }

    chooseColor(val, state){
    	if(val === null){
    		return 'black'
    	}

    	return state.scale(val).hex()
    }

    fetchPolygon(coords){
    	helpers.fetchPolygon.bind(this)(coords)
    }

    dateRangeMultiplyer(s){
    	// allowed date range will be multiplied by this much, as a function of the mutated state s
    	return 1
    }

    unitTransform(unit, scale){
		if (unit === '' || unit === '-'){
			return unit
		}

    	if(scale === 'k'){
    		return Math.round(unit)/1000
    	} else if(scale === 'M'){
    		return Math.round(unit/1000)/1000
    	} else if(scale === 'G'){
    		return Math.round(unit/1000000)/1000
    	} else {
    		return Math.round(1000*unit)/1000
    	}
    }

	inverseTransform(unit, scale){
		if (unit === '' || unit === '-'){
			return unit
		}

		if(scale === 'k'){
			return 1000*unit
		} else if(scale === 'M'){
			return 1000000*unit
		} else if(scale === 'G'){
			return 1000000000*unit
		} else {
			return unit
		}
	}

    genTooltip(point){
    	// given an array <point> corresponding to a single point returned by an API data route with compression=minimal,
    	// return the jsx for an appropriate tooltip for this point.

		  if(this.state.subgrid){
		   	return(<Popup>
				  			Long / Lat: {helpers.mungePrecision(point.geolocation.coordinates[0])} / {helpers.mungePrecision(point.geolocation.coordinates[1])} <br />
				  			Value: {point.data[0][0]}
				  	  </Popup>)
		  } else {
	    	return(<Popup>
						      ID: {point._id} <br />
						      Long / Lat: {point.geolocation.coordinates[0]} / {point.geolocation.coordinates[1]} <br />
						      Date: {point.timeseries[0]} <br />
						    </Popup>)
		  }
    }

    setScale(min, max, state){

    	if(state.subgrid){
    		if(min > 0){
    			state.scale = chroma.scale(['#FFFFFF', '#FF0000']).domain([0,max])
    			state.colormin = 0
    			state.colormax = max
    		} else if(max < 0){
    			state.scale = chroma.scale(['#0000FF', '#FFFFFF']).domain([min,0])
    			state.colormin = min
    			state.colormax = 0
    		} else {
    			state.scale = chroma.scale(['#0000FF', '#FFFFFF', '#FF0000']).domain([min,0,max])
    			state.colormin = min
    			state.colormax = max
    		}
    	} else {
    		state.scale = chroma.scale(['#440154', '#482777', '#3f4a8a', '#31678e', '#26838f', '#1f9d8a', '#6cce5a', '#b6de2b', '#fee825']).domain([min,max])
    		state.colormin = min
    		state.colormax = max
    	}

    	return state
   }

	render(){
		console.log(this.state)
		return(
			<>
				<div style={{'width':'100vw', 'textAlign': 'center', 'padding':'0.5em', 'fontStyle':'italic'}} className='d-lg-none'>Use the right-hand scroll bar to scroll down for search controls</div>
				<div className='row'><span style={{'textAlign':'center', 'backgroundColor':'red', 'color':'white', 'padding':'0.5em'}}><b>This page is in beta and is for demonstration purposes only.</b></span></div>
                <div className='row' style={{'width':'100vw'}}>	
					{/*search option sidebar*/}
					<div className='col-lg-3 order-last order-lg-first'>
						<fieldset disabled ref={this.formRef}>
							<span ref={this.statusReporting} className='statusBanner busy'>Downloading...</span>
							<div className='mapSearchInputs scrollit' style={{'height':'90vh'}}>
								<h5>
									<OverlayTrigger
										placement="right"
										overlay={
											<Tooltip id="compression-tooltip" className="wide-tooltip">
												Gridded products interpolate in-situ measurements or simulate data to regular grids. Narrow down your search using the form below, or specify a geographic region by first clicking on the pentagon button in the top left of the map, then choosing the vertexes of your region of interest. Click on regions that appear to see links to more information.
											</Tooltip>
										}
										trigger="click"
									>
										<i style={{'float':'right'}} className="fa fa-question-circle" aria-hidden="true"></i>
                                    </OverlayTrigger>
									{'Explore ' + this.state.title}		
								</h5>
								<small><a target="_blank" rel="noreferrer" href={this.reflink}>Original Data Reference</a></small>
								<div className="form-floating mb-3" style={{'marginTop': '0.5em'}}>
										<input 
                                            type="password" 
                                            className="form-control" 
                                            id="apiKey" 
                                            value={this.state.apiKey} 
                                            placeholder="" 
                                            onInput={helpers.changeAPIkey.bind(this)}
                                        ></input>
									<label htmlFor="apiKey">API Key</label>
									<div id="apiKeyHelpBlock" className="form-text">
					  					<a target="_blank" rel="noreferrer" href='https://argovis-keygen.colorado.edu/'>Get a free API key</a>
									</div>
								</div>
								<div>
                                    {this.levels.length > 1 &&
									<div className='row'>
										<div className='col-12'>
											<small className="form-text text-muted">Depth Layer [{this.state.levelunits}]</small>
											<select className="form-select" value={this.state.levelindex} onChange={(v) => this.changeLevel(v, 'levelindex')}>
												{this.levels}
											</select>
										</div>
									</div>}
									<div className='row'>
										<div className='col-12'>
											<small className="form-text text-muted">Date</small>
											<select className="form-select" value={this.state.timestep} onChange={(v) => this.changeDate(v, 'timestep')}>
												{this.timesteps}
											</select>
										</div>
									</div>
									{this.state.lattice === 'ccmpwind' && 
									<div className='row'>
										<div className='col-12'>
											<small className="form-text text-muted">Variable</small>
											<select className="form-select" value={this.state.grid} onChange={(v) => this.changeVariable(v)}>
												{this.variables}
											</select>
										</div>
									</div>}
								</div>

								<div className="form-check" style={{'marginTop': '1em'}}>
									<input className="form-check-input" checked={this.state.subgrid} onChange={this.toggleSubgrid.bind(this)} type="checkbox" id='subgrid'></input>
									{this.levels.length > 1 &&
									<label className="form-check-label" htmlFor='subgrid'>Subtract another level or date</label>}
									{this.levels.length === 1 &&
									<label className="form-check-label" htmlFor='subgrid'>Subtract another date</label>}
								</div>

								<div style={{'display': this.state.subgrid ? 'block' : 'none'}}>
                                    {this.levels.length > 1 &&
									<div className='row'>
										<div className='col-12'>
											<small className="form-text text-muted">Subtraction Depth Layer [m]</small>
											<select className="form-select" value={this.state.sublevelindex} onChange={(v) => this.changeLevel(v, 'sublevelindex')}>
												{this.levels}
											</select>
										</div>
									</div>}
									<div className='row'>
										<div className='col-12'>
											<small className="form-text text-muted">Subtraction Date</small>
											<select className="form-select" value={this.state.subtimestep} onChange={(v) => this.changeDate(v, 'subtimestep')}>
												{this.timesteps}
											</select>
										</div>
									</div>
								</div>

								<div className='row'>
	      							<div className='col-6' style={{'paddingRight': '0px'}}>
										<div className="form-text">
						  					<span>color min</span>
										</div>
										<input 
											type="text" 
											className="form-control minmax" 
											placeholder="Auto" 
											value={this.state.display_min}
                                            onChange={e => this.changeRange(e, 'display_min')}
                                            onBlur={e => {
                                                if(!this.state.suppressBlur){
                                                    this.setState({
                                                        display_min: parseFloat(e.target.defaultValue), 
                                                        user_defined_min: e.target.defaultValue!=='', 
                                                        phase: 'remapData'
                                                    })
                                                }
                                            }}
											onKeyPress={e => {
                                                if(e.key==='Enter'){
                                                    this.setState({
                                                        display_min: parseFloat(e.target.defaultValue), 
                                                        user_defined_min: e.target.defaultValue!=='', 
                                                        phase: 'remapData',
                                                        suppressBlur: true
                                                    })
                                                }
                                            }}
											aria-label="xmin" 
											aria-describedby="basic-addon1"/>
									</div>
									<div className='col-6' style={{'paddingRight': '0px'}}>
										<div className="form-text">
						  					<span>color max</span>
										</div>
										<input 
											type="text"
											className="form-control minmax" 
											placeholder="Auto" 
											value={this.state.display_max}
                                            onChange={e => this.changeRange(e, 'display_max')}
                                            onBlur={e => {
                                                if(!this.state.suppressBlur){
                                                    this.setState({
                                                        display_max: parseFloat(e.target.defaultValue), 
                                                        user_defined_max: e.target.defaultValue!=='', 
                                                        phase: 'remapData'
                                                    })
                                                }
                                            }}
											onKeyPress={e => {
                                                if(e.key==='Enter'){
                                                    this.setState({
                                                        display_max: parseFloat(e.target.defaultValue), 
                                                        user_defined_max: e.target.defaultValue!=='', 
                                                        phase: 'remapData',
                                                        suppressBlur: true
                                                    })
                                                }
                                            }}
											aria-label="xmax" 
											aria-describedby="basic-addon1"/>
									</div>
								</div>
								
								<svg style={{'width':'100%', 'height':'1em', 'marginTop': '1em'}} version="1.1" xmlns="http://www.w3.org/2000/svg">
								  <defs>
								    <linearGradient id="grad" x1="0" x2="1" y1="0" y2="0">
								      <stop offset="0%" stopColor={this.state.scale(this.state.colormin)} />
								      <stop offset="10%" stopColor={this.state.scale(this.state.colormin + 0.1*(this.state.colormax-this.state.colormin))} />
								      <stop offset="20%" stopColor={this.state.scale(this.state.colormin + 0.2*(this.state.colormax-this.state.colormin))} />
								      <stop offset="30%" stopColor={this.state.scale(this.state.colormin + 0.3*(this.state.colormax-this.state.colormin))} />
								      <stop offset="40%" stopColor={this.state.scale(this.state.colormin + 0.4*(this.state.colormax-this.state.colormin))} />
								      <stop offset="50%" stopColor={this.state.scale(this.state.colormin + 0.5*(this.state.colormax-this.state.colormin))} />
								      <stop offset="60%" stopColor={this.state.scale(this.state.colormin + 0.6*(this.state.colormax-this.state.colormin))} />
								      <stop offset="70%" stopColor={this.state.scale(this.state.colormin + 0.7*(this.state.colormax-this.state.colormin))} />
								      <stop offset="80%" stopColor={this.state.scale(this.state.colormin + 0.8*(this.state.colormax-this.state.colormin))} />
								      <stop offset="90%" stopColor={this.state.scale(this.state.colormin + 0.9*(this.state.colormax-this.state.colormin))} />
								      <stop offset="100%" stopColor={this.state.scale(this.state.colormax)} />
								    </linearGradient>
								  </defs>
								  <rect width="100%" height="1em" fill="url(#grad)" />
								</svg>
								<div style={{'width':'100%', 'textAlign': 'center'}}>
									<span style={{'writingMode': 'vertical-rl', 'textOrientation': 'mixed', 'float': 'left', 'marginTop':'0.5em'}}>{(this.state.subgrid && this.state.display_min>0) ? 0 : this.state.display_min}</span>
									<span>{this.scales+this.state.units}</span>
									<span style={{'writingMode': 'vertical-rl', 'textOrientation': 'mixed', 'float':'right', 'marginTop':'0.5em'}}>{(this.state.subgrid && this.state.display_max<0) ? 0: this.state.display_max}</span>
								</div>
							</div>
						</fieldset>
					</div>

					{/*leaflet map*/}
					<div className='col-lg-9'>
						<MapContainer center={[-40, this.state.centerlon]} maxBounds={[[-90,this.state.centerlon-180],[90,this.state.centerlon+180]]} zoomSnap={0.01} zoomDelta={1} zoom={2.05} minZoom={4} scrollWheelZoom={true}>
						  <TileLayer
						    attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
						    url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
						  />
						  <FeatureGroup ref={this.fgRef}>
						    <EditControl
						      position='topleft'
						      onCreated={p => helpers.onPolyCreate.bind(this)(p)}
						      onDeleted={p => helpers.onPolyDelete.bind(this)(this.defaultPolygon, p)}
						      onDrawStop={p => helpers.onDrawStop.bind(this)(p)}
						      onDrawStart={p => helpers.onDrawStart.bind(this)(p)}
						      draw={{
                                rectangle: false,
                                circle: false,
                                polyline: false,
                                circlemarker: false,
                                marker: false,
                                polygon: {
                    	            shapeOptions: {
                    		            fillOpacity: 0
                    	            }
                                }
						      }}
						      edit={{
										edit: false
									}}
						    />
						    <Polygon key={Math.random()} positions={this.state.interpolated_polygon.map(x => [x[1],x[0]])} fillOpacity={0}></Polygon>
						  </FeatureGroup>
              				{this.state.gridcells}
						</MapContainer>
					</div>
				</div>
			</>
		)
	}
}

export default Timeseries